{
  "module": "Prix Six Application",
  "generated": "2026-01-30",
  "total_guids": 899,
  "guids": [
    {
      "guid": "ADMIN_ATTACK_MONITOR-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin security component that displays unacknowledged attack alerts (bot attacks, credential stuffing, distributed attacks) with severity-coded UI and acknowledgement controls.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ATTACK_MONITOR-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for an attack alert document from the attack_alerts Firestore collection.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ATTACK_MONITOR-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Human-readable labels for attack type codes, used in alert card headings.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ATTACK_MONITOR-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Descriptive text for each attack type, shown as secondary detail in alert cards.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ATTACK_MONITOR-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main exported component that queries unacknowledged attack alerts and renders a severity-coded summary bar with expandable detail cards.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ATTACK_MONITOR-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised Firestore query for unacknowledged attack alerts, gated on admin status to prevent permission errors.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ATTACK_MONITOR-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Acknowledges a single attack alert by updating its Firestore document with acknowledged=true, the admin's user ID, and a timestamp.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ATTACK_MONITOR-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Acknowledges all currently visible attack alerts in parallel using Promise.all.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ATTACK_MONITOR-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Splits alerts into critical and warning groups to drive severity-based UI styling (pulsing red vs amber).",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ATTACK_MONITOR-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders a single attack alert card with severity-coded styling, attack details (IP, target, attempts), and an acknowledge button.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDIT-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for toggling the global audit logging system on or off via admin_configuration/global Firestore document.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDIT-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for the audit settings shape stored in admin_configuration/global.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDIT-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Reads the current audit settings from the admin_configuration/global Firestore document, defaulting to disabled.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDIT-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Writes updated audit settings to the admin_configuration/global Firestore document using merge to preserve other fields.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDIT-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main exported component providing a toggle switch and save button for enabling/disabling global audit logging.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDIT-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Loads the current audit settings from Firestore on component mount.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDIT-006",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Persists the current audit logging toggle state to Firestore and shows a success/failure toast.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDIT-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Updates the local settings state when the toggle switch is changed, without persisting until save.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDITLOG-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for viewing the system audit log of user activity and system events.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDITLOG-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for an audit log document from the audit_logs Firestore collection.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDITLOG-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Props interface for AuditLogViewer, accepting pre-fetched user data to resolve user IDs to display names.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDITLOG-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main exported component that displays the last 100 audit log entries with user resolution, action badges, and expandable details.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDITLOG-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised Firestore query that fetches the 100 most recent audit logs ordered by timestamp descending.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDITLOG-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Maps audit log action types to Badge variants for consistent visual styling.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_AUDITLOG-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Resolves a userId to a User object from the pre-fetched allUsers list for display name lookup.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for running data integrity checks across all Firestore collections and displaying results. Validates users, drivers, races, predictions, team coverage, race results, scores, standings, and leagues.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface for the component props: receives the preloaded allUsers array and loading flag from the parent admin page.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type alias for the sequential check phases, used to track progress through the validation pipeline.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Human-readable labels for each check phase, displayed above the progress bar during a check run.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Progress percentage for each check phase, used to fill the progress bar proportionally.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Render a small status icon (green check, yellow warning, red X) based on a check result status.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Render a coloured Badge (Pass/Warning/Error) based on a check result status.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Render a coloured Badge (Warning/Error) based on an individual issue severity level.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-008",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Main Consistency Checker component. Orchestrates on-demand data fetching, sequential validation checks across 9 categories, progress display, summary table, score type breakdown, issue details, and export to error_logs.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Execute the full consistency check pipeline: users, drivers, races, predictions, team coverage, race results, scores, standings, and leagues. Fetches Firestore data on-demand per phase to minimise memory usage.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Export all detected issues to the error_logs Firestore collection with a correlation ID for tracking.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_CONSISTENCY-011",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Derived count of total issues across all check categories, used to control UI visibility of the Issues Detail card and Export button.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for managing the email queue (push, resend, delete) and viewing historical email send logs.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for a historical email log document from the email_logs Firestore collection.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for a queued email document from the email_queue collection, including retry state.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main exported component providing email queue management (push/resend/delete) and historical email log viewing.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches all queued emails (including failed) from the /api/email-queue endpoint.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Triggers the initial fetch of queued emails when the admin user is confirmed.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Sends a single queued email immediately via the /api/email-queue push action.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-007",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Re-queues a single failed email for another round of retry attempts.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Deletes a single queued email from the queue, discarding it permanently.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Pushes all pending queued emails for immediate sending in a single batch operation.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-010",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Re-queues all failed emails for another round of retry attempts in a single batch operation.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Deletes all emails from the queue, clearing it entirely.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised Firestore query for historical email send logs ordered by timestamp descending.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-013",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Maps an email log status to a Badge variant for consistent visual status representation.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-014",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Renders a status badge for a queued email, showing failed state, retry count, or pending.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_EMAILLOG-015",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Computes counts of pending and failed emails for display in the header and button labels.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for viewing, searching, filtering, and resolving system error logs.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for an error log document from the error_logs Firestore collection.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Maps PX error code prefixes to display colours and labels for visual categorisation.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Configuration arrays for the two rows of filter tabs: category filters and view mode filters.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Extracts the PX category prefix from an error code string, falling back to PX-9 (Unknown).",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Small utility component that copies text to the clipboard with visual feedback.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-006",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Main exported component that provides a full error log viewing interface with filtering, searching, grouping, and resolution tracking.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised Firestore query that fetches the 500 most recent error logs ordered by timestamp descending.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Applies category, search term, time-based, and resolution status filters to the raw error logs.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Extracts the error code from a log, checking multiple possible locations in the log structure.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Groups filtered logs by their error code for the \"Grouped\" view mode.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-011",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Computes aggregate statistics (total count and per-category counts) across all unfiltered error logs.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Toggles the expanded/collapsed state of a group in the grouped view.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-013",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders a single error log entry with expandable details, copy-able correlation ID, stack trace, context, and a \"Mark as Resolved\" action.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-014",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Marks an error log as resolved by updating the Firestore document with resolved=true and a timestamp.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-015",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Safely extracts a Date object from the log's timestamp, handling both Firestore seconds and ISO string formats.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ERRORLOG-016",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Safely serialises the error log's context object to a JSON string for display.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for reviewing and managing user-submitted bug reports and feature requests, with filtering, status updates, and deletion.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for a feedback item document in the Firestore feedback collection.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Maps feedback status values to Tailwind CSS colour classes for badge styling.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main FeedbackManager component providing a filterable, expandable list of feedback items with status management and deletion.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Local state for feedback items, loading flag, and filter selections (type and status).",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Sets up a real-time Firestore listener on the feedback collection, ordered by creation date descending.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Updates a feedback item's status in Firestore. When resolving, stamps the current app version and resolution timestamp.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Permanently deletes a feedback item from the Firestore feedback collection.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Formats a Firestore Timestamp into a human-readable UK-locale date string with time.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Filters the feedback array by the currently selected type and status filters.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-010",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Computes summary statistics (bug count, feature count, new count) for the stats cards display.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-011",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders a loading skeleton while feedback data is being fetched from Firestore.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_FEEDBACK-012",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders the complete Feedback Manager UI: stats cards, type/status filter buttons, and an expandable accordion list of feedback items.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_HOT_NEWS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for managing the Hot News feed: toggle AI updates, manually edit content, refresh via AI, and optionally email subscribers.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_HOT_NEWS-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main HotNewsManager component providing AI toggle, content editor, refresh button, and email dispatch controls.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_HOT_NEWS-002",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Local state managing the hot news settings, loading/error states, form fields, and operation flags.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_HOT_NEWS-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches the current hot news settings from Firestore on component mount and populates local state.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_HOT_NEWS-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Saves manual content edits and the AI toggle to Firestore, logs an audit event, and optionally sends emails to all subscribers.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_HOT_NEWS-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Conditionally sends hot news content via email to all subscribed users after a successful save.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_HOT_NEWS-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Triggers the AI-powered hot news generation flow, updates the textarea content, and persists the result to Firestore.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_HOT_NEWS-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders a loading skeleton while hot news settings are being fetched from Firestore.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_HOT_NEWS-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders an error alert when the initial settings fetch fails, blocking access to the editor.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_HOT_NEWS-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders the full Hot News management UI: AI toggle, content textarea, email checkbox, save and refresh buttons.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_LEAGUES-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for viewing all leagues, their owners, member counts, invite codes, and expandable member lists.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_LEAGUES-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Defines the props contract for LeaguesManager, requiring the full user list and its loading state for team name resolution.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_LEAGUES-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main LeaguesManager component rendering a table of all leagues with expandable member details and invite code copy functionality.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_LEAGUES-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised Firestore query for the entire leagues collection, used by the useCollection hook.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_LEAGUES-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Creates a Map from user ID to team name for efficient lookup when resolving league member and owner names.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_LEAGUES-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Resolves a user ID to a human-readable team name, with special handling for the system owner.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_LEAGUES-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Copies a league's invite code to the system clipboard and shows a confirmation toast.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_LEAGUES-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Toggles the expanded/collapsed state for a league row to show or hide member details.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_LEAGUES-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders the leagues table with columns for name, owner, member count, invite code, and an expand/collapse control.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for monitoring online user sessions and managing Single User Mode (purge all sessions, restrict access to one admin).",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Defines the session timeout window; sessions inactive beyond this threshold are considered expired.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for a Firestore presence document, tracking a user's online status and session GUIDs.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Defines the props contract for OnlineUsersManager, requiring the full user list and its loading state.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for Single User Mode configuration stored in admin_configuration/global.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fire-and-forget helper to log errors to the error_logs Firestore collection with full context.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main OnlineUsersManager component displaying active sessions in a table and providing Single User Mode controls.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches the current Single User Mode configuration from admin_configuration/global on component mount.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Activates Single User Mode: purges all presence sessions except the current admin's, then sets the flag in admin_configuration.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Deactivates Single User Mode: clears the flag in admin_configuration/global so all users can connect normally.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised Firestore query for the entire presence collection, used by the useCollection hook.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-011",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Derives the list of users with active sessions by joining presence data with user details, filtering by session timeout.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-012",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Computes the total count of active sessions across all users, only counting sessions within the timeout window.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-013",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Resolves the team name of the admin who activated Single User Mode for display in the warning banner.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_ONLINE_USERS-014",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders the complete Online Users UI: session table, Single User Mode controls, and status banner.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for entering official F1 race results and managing existing results. Provides a two-step wizard: race selection then driver picker for top-6 positions.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Normalize a raceId string by stripping GP/Sprint suffixes and replacing spaces with hyphens for consistent matching against prediction raceId format.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Convert a driver ID (e.g., \"hamilton\") to a 3-letter display code (e.g., \"HAM\") by looking up the driver in F1Drivers static data.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface for a race result document stored in the race_results Firestore collection.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Type alias for the two-step wizard flow: race selection then result entry.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main admin component for entering and managing official F1 race results via a two-step wizard (select race, then pick top-6 drivers).",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "State management for the two-step wizard flow, driver selections, submission status, and deletion tracking.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetch the count of unique team predictions when a race is selected, to show how many teams will be scored. Counts ALL predictions (carry-forward model).",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised Firestore query for fetching all existing race results, ordered by submission date descending.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Derived list of F1 drivers not yet placed in any of the 6 result positions, available for selection.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Add a driver to the first empty position slot in the predictions array.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Remove a driver from a specific position slot, making them available again.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Swap a driver with the adjacent position (up or down) to reorder the result.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Transition from step 1 (race selection) to step 2 (driver entry) after validating a race is selected.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-014",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Navigate back to step 1 (race selection) and reset the driver selections.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-015",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate all 6 positions are filled and open the confirmation dialog before submitting results.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-016",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generate a compact text summary of the result (e.g., \"1-HAM, 2-VER, 3-NOR, ...\") for the confirmation dialog.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-017",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Submit the confirmed race results to the server-side /api/calculate-scores endpoint for secure score calculation, then trigger email notifications via /api/send-results-email.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-018",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Delete a race result and its associated scores via the server-side /api/delete-scores endpoint.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_RESULTS-019",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Format a Firestore Timestamp or Date to a human-readable en-GB string (DD Mon YYYY, HH:MM).",
      "dependencies": []
    },
    {
      "guid": "ADMIN_SCORING-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Read-only admin component displaying the fixed scoring rules for the Prix Six fantasy league, sourced from SCORING_POINTS and SCORING_DERIVED constants.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_SCORING-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main ScoringManager component rendering a card that explains each scoring tier and the maximum possible score.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_SITE_FUNCTIONS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for toggling global site functions: user login and new user sign-up. Reads and writes admin_configuration/global in Firestore.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_SITE_FUNCTIONS-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for the global site settings stored in admin_configuration/global.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_SITE_FUNCTIONS-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main SiteFunctionsManager component providing toggle switches for global site features with save persistence.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_SITE_FUNCTIONS-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches the current global site settings from Firestore on component mount.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_SITE_FUNCTIONS-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Persists the current toggle states to Firestore and logs an audit event for the change.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_SITE_FUNCTIONS-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders a loading skeleton while settings are being fetched from Firestore.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_SITE_FUNCTIONS-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders the site functions card with toggle switches for login and sign-up, plus a save button.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_STANDING_DATA-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Read-only admin component displaying standing data: F1 drivers grouped by team and the full race calendar schedule.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_STANDING_DATA-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Groups the flat F1Drivers array into a lookup keyed by team name for team-based rendering.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_STANDING_DATA-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Maps F1 constructor names to Tailwind CSS background colour classes for visual team badges.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_STANDING_DATA-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main StandingDataManager component rendering two cards: F1 Drivers by team and the Race Calendar table.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_STANDING_DATA-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Formats an ISO date string into a human-readable UK-locale date (e.g., \"Sat, 15 Mar 2026\").",
      "dependencies": []
    },
    {
      "guid": "ADMIN_STANDING_DATA-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Formats an ISO date string into a human-readable UK-locale time with timezone (e.g., \"14:00 GMT\").",
      "dependencies": []
    },
    {
      "guid": "ADMIN_STANDING_DATA-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Determines if a race has already occurred by comparing its time to the current date.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_STANDING_DATA-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders the complete standing data view: driver cards grouped by team and a race calendar table.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_TEAM-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for managing user teams: view, edit, delete, toggle admin status, and unlock locked accounts.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_TEAM-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Defines the props contract for TeamManager, requiring the full user list and its loading state.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_TEAM-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main TeamManager component that renders a table of all users with edit, admin toggle, and delete actions.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_TEAM-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Local state for the edit dialog: tracks which user is selected and what editable fields contain.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_TEAM-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Opens the edit dialog and pre-populates form fields with the selected user's current data.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_TEAM-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Persists edited user fields (teamName, email, isAdmin) to Firestore and closes the dialog.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_TEAM-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Toggles a user's admin status between admin and regular user.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_TEAM-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Permanently deletes a user and all their data from the system.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_TEAM-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Resets a locked user's badLoginAttempts counter to zero, unlocking their account.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_TEAM-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders the team management UI: a table of users with action buttons and an edit dialog.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin component for managing WhatsApp integration: worker status monitoring, alert configuration, custom message sending, message queue viewing, and alert history.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-001",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Dynamically import QRCode component to avoid SSR issues; includes fallback UI on load failure.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Constants for the WhatsApp proxy API endpoint and message length limit.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface for the WhatsApp worker status response, including connection state, groups, and keep-alive health.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface for entries in the whatsapp_status_log Firestore collection, tracking connection state changes.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface for messages in the whatsapp_queue Firestore collection, representing messages to be sent by the worker.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Static configuration defining all alert categories and their individual alert types for the Alert Control Panel UI.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main admin component for WhatsApp integration management. Provides worker status monitoring, QR code authentication, alert settings configuration, custom message sending, message queue display, and alert history.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "State management for all component concerns: worker status, alert settings, message form, queue, history, status log, and QR code lifecycle.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Retrieve Firebase auth token for authenticated API requests to the WhatsApp proxy.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-010",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Fetch QR code string from the WhatsApp worker via the proxy API for display in the QR scanner UI.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetch current worker status (connection, groups, keep-alive) from the WhatsApp proxy API. Auto-selects first matching group.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetch WhatsApp alert settings from Firestore and populate local editing state with saved values.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Poll worker status on mount and every 30 seconds to keep the status card up to date.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-014",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Auto-refresh the QR code every 30 seconds while the worker is awaiting QR scan and a QR code is displayed.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-015",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Track QR code age in seconds to display freshness warnings and auto-expire visual feedback.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-016",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetch alert settings from Firestore on component mount.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-017",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Real-time Firestore listener for the last 10 messages in whatsapp_queue, ordered by creation time descending.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-018",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Real-time Firestore listener for the last 50 entries in whatsapp_alert_history, ordered by creation time descending.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-019",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Real-time Firestore listener for the last 25 entries in whatsapp_status_log, ordered by timestamp descending.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-020",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Persist alert settings (master switch, test mode, target group, alert toggles) to Firestore and log the change in audit trail.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-021",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Queue a custom message for delivery to a WhatsApp group via the worker. Adds to whatsapp_queue and whatsapp_alert_history, and logs an audit event.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-022",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Toggle an individual alert type on or off in the local editing state.",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-023",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Render a coloured Badge component based on message queue status (PENDING, PROCESSING, SENT, FAILED).",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-024",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Format a Firestore Timestamp to a human-readable en-GB date/time string (DD/MM HH:MM).",
      "dependencies": []
    },
    {
      "guid": "ADMIN_WHATSAPP-025",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Derived boolean that compares local editing state against last-saved settings to detect unsaved changes.",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that allows an authenticated user to create a secondary team for the fantasy league. Enforces uniqueness, applies late-joiner handicap if the season has started, and registers the team in the global league.",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Defines the shape of the incoming secondary team creation request, containing only the desired team name.",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Main POST handler that authenticates the user, validates the team name, checks for duplicates, creates the secondary team record, registers it in the global league, applies a late-joiner handicap if applicable, and logs audit events.",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Authenticates the request by extracting and verifying the Firebase Auth bearer token from the Authorization header.",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Parses the request body and validates that the team name meets the minimum length requirement (3 characters).",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Checks that the user exists and does not already have a secondary team. Prevents duplicate secondary team creation.",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Case-insensitive uniqueness check across all existing primary and secondary team names to prevent duplicate team names in the league.",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Writes the secondary team name to the user document and adds the secondary team ID to the global league's member list.",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Late-joiner handicap: if the season has already started (scores exist), the new secondary team starts 5 points behind the last-place team. This prevents new teams from having an unfair advantage by joining with zero points mid-season.",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Logs the successful secondary team creation in the audit trail and returns a success response with the new team name and ID.",
      "dependencies": []
    },
    {
      "guid": "API_ADD_SECONDARY_TEAM-010",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level error handler that catches any unhandled exception during secondary team creation, logs it with a correlation ID, and returns a 500 response with the correlation ID for user-reportable error tracing.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin API route for deleting a user account  coordinates removal from Firebase Auth, Firestore users/presence collections, and league memberships with full audit logging.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Zod schema for validating delete request  ensures both userId and adminUid are present and non-empty.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler that orchestrates user deletion: validates input, checks admin permissions, prevents self-deletion, removes Auth + Firestore records, cleans up league memberships, and logs audit events.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Early return on Zod validation failure  provides field-level errors to the caller.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Verify the requesting user has admin privileges before allowing deletion.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Safety guard  prevent admins from accidentally deleting their own account.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Capture user data before deletion for inclusion in the audit log.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Delete user from Firebase Auth. If user is already missing from Auth (orphaned Firestore record), proceed with Firestore cleanup only.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Delete Firestore user and presence documents in a batch. Logs a critical error if Auth was already deleted but Firestore cleanup fails (split-brain state).",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-009",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Remove the deleted user's ID from all league memberUserIds arrays. Best-effort  failure is logged but does not block the response.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Write an audit log entry recording who deleted whom and the deleted user's details.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_DELETE_USER-011",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level error handler  catches any unhandled exceptions, logs to error_logs, and returns a safe 500 response with correlation ID.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin API route for updating user profile fields (email, teamName, isAdmin, mustChangePin) with full validation, deduplication, and downstream propagation.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Zod schema for strict request validation  prevents mass assignment by only allowing known fields.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler that orchestrates admin user updates: validates input, checks admin permissions, deduplicates email/teamName, updates Auth + Firestore, propagates teamName to predictions, and logs audit events.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Early return on Zod validation failure  provides detailed field-level errors to the caller.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Verify the requesting user has admin privileges before allowing any modifications.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Handle email change: normalise to lowercase, check for duplicates in both Firestore and Firebase Auth, then update Auth record.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Handle teamName change: check for case-insensitive duplicates across all users, capture old name for downstream propagation.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Persist the validated changes to the Firestore users document with a server timestamp.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Propagate teamName changes to all of the user's prediction documents (Golden Rule #3: Single Source of Truth  denormalised teamName must stay in sync).",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Write a general audit log entry for every admin user update, regardless of which fields changed.",
      "dependencies": []
    },
    {
      "guid": "API_ADMIN_UPDATE_USER-010",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level error handler  catches any unhandled exceptions, logs to error_logs, and returns a safe 500 response with correlation ID.",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "AI-powered race prediction analysis API route. Accepts a user's top-6 driver prediction and analysis weight configuration, builds a dynamic weighted prompt, calls Genkit/Gemini AI, and returns structured analysis text covering multiple F1 analysis facets and optional pundit personas.",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface for a single driver in the user's prediction  position, driver code, full name, and constructor team.",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface for analysis weight sliders  each facet (0-10) controls how much emphasis the AI gives to that analysis dimension. Includes two pundit personas (jackSparrow, rowanHornblower) with extended word budgets.",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface for the full analysis request payload  race metadata, driver predictions, weight configuration, and pre-calculated total weight.",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Constants defining word budgets per facet type  standard facets get 50 words each, pundit personas get up to 250 words scaled by weight.",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Calculate per-facet word budgets based on weights. Standard facets get a fixed 50 words if active; pundit facets scale linearly from 0-250 words based on weight (0-10).",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Build the complete AI prompt dynamically based on race details, user predictions, and weight configuration. Includes facet descriptions with emphasis levels, word budgets, exclusion notes, and formatting rules (British English, headings, verdict).",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-007",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler that validates weights, builds the prediction list and weighted prompt, calls Genkit AI (Gemini), and returns the analysis text. Includes dedicated error handling for AI generation failures separate from general errors.",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-008",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Validate that the total weight across all facets does not exceed the maximum of 77. Prevents abuse and ensures balanced analysis.",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-009",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Call Genkit AI (Gemini) with the weighted prompt and configured generation parameters. Dedicated try/catch provides specific AI error handling with detailed logging.",
      "dependencies": []
    },
    {
      "guid": "API_AI_ANALYSIS-010",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Top-level error handler  catches any unhandled exceptions outside of the AI call (e.g., JSON parse, validation). Logs to error_logs and returns a safe 500 response with a fallback analysis message.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Server-side API route that authenticates users via email + 6-digit PIN, enforces account lockout after repeated failures, logs all attempts for attack detection, and returns a Firebase custom token on success.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Extract the real client IP address from incoming requests, accounting for various proxy/CDN header conventions.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Define the brute-force protection thresholds: max allowed failed attempts and lockout window duration.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Type contract for the expected JSON body of the login request.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Main login POST handler. Validates input, checks lockout status, verifies credentials via Firebase Auth REST API, tracks failed/successful attempts, and returns a custom token on success.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate that both email and PIN are present before proceeding with authentication.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Look up the user document in Firestore by normalised email to check lockout status and track login attempts.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Enforce account lockout: if the user has exceeded MAX_LOGIN_ATTEMPTS within the LOCKOUT_DURATION_MS window, reject the login and log the blocked attempt. Also auto-reset the counter once the lockout window expires.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Look up the user in Firebase Auth by email to confirm the account exists in the auth system, separate from Firestore.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-009",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Verify the user's PIN (password) by calling the Firebase Auth REST API (Identity Toolkit signInWithPassword endpoint), since the Admin SDK does not support password verification directly.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-010",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Handle failed credential verification: increment the bad login attempts counter, log the failure for attack detection, write an audit record, and trigger lockout if the threshold is reached.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-011",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Handle successful authentication: generate a Firebase custom token, reset the bad login attempts counter, log the success for analytics and auditing, and return the token to the client.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_LOGIN-012",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level catch-all error handler for any unhandled exception during login. Logs the error with full context (excluding the PIN) and returns a generic 500 response with the correlation ID.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_RESET_PIN-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Server-side API route that handles PIN reset requests: validates the email, generates a new random 6-digit PIN, updates Firebase Auth, marks the user as mustChangePin, queues a reset email, and logs the action. Returns a generic success message regardless of whether the email exists to prevent enumeration attacks.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_RESET_PIN-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Type contract for the expected JSON body of the PIN reset request.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_RESET_PIN-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Main PIN reset POST handler. Validates the email, looks up the user in Firestore, generates a cryptographically random 6-digit PIN, updates Firebase Auth, flags the user for mandatory PIN change, queues a reset email, and writes audit records. Returns a deliberately ambiguous success message to prevent email enumeration.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_RESET_PIN-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate that the email field is present in the request body.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_RESET_PIN-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Look up the user in Firestore by normalised email. If no user is found, return a generic success message to prevent email enumeration attacks (attacker cannot determine which emails have accounts).",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_RESET_PIN-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generate a cryptographically secure random 6-digit PIN and update the user's password in Firebase Auth. Uses crypto.randomInt for uniform distribution across the 100000-999999 range.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_RESET_PIN-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Set the mustChangePin flag on the user's Firestore document so the application forces a PIN change on the user's next successful login.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_RESET_PIN-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Queue the PIN reset email by writing to the mail collection (consumed by the email sending service) and log the email to the email_logs collection for auditing and debugging.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_RESET_PIN-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Write an audit log entry recording that a PIN reset email was queued for this user, then return the generic success message.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_RESET_PIN-009",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level catch-all error handler for any unhandled exception during PIN reset. Logs the error to error_logs (with fallback to console if logging itself fails) and returns a generic 500 response with correlation ID for support tracing.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Server-side API route that registers new users: validates input, creates Firebase Auth and Firestore records, enrols the user in the global league, applies late-joiner handicap scoring if the season has started, sends welcome and verification emails, and returns a custom token for immediate sign-in.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "List of commonly guessable 6-digit PINs that are rejected during signup to enforce minimum credential strength.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Constant for the global league document ID, used to add every new user to the shared league.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Type contract for the expected JSON body of the signup request.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Main signup POST handler. Validates all input fields (email, team name, PIN strength), checks admin toggle for signup availability, prevents duplicate emails and team names, creates the Firebase Auth user and Firestore documents, handles late-joiner handicap, sends emails, and returns a custom token.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate that all required fields (email, team name, PIN) are present.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Validate PIN format (exactly 6 digits) and reject weak/guessable PINs from the WEAK_PINS list.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate that the team name is at least 3 characters long.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Check the admin_configuration/site_settings document to determine if new user signups are currently enabled. Allows admins to disable registration without code changes.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Check for duplicate email addresses in the Firestore users collection to prevent multiple accounts with the same email.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Check for duplicate team names (case-insensitive) across all existing users to ensure team name uniqueness.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Create the Firebase Auth user record with the provided email and PIN as password. Handles the auth/email-already-exists error case separately from other auth errors.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Create the Firestore user document and presence document for the newly registered user. The user document stores profile and state data; the presence document tracks online status.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Add the new user to the global league by appending their uid to the memberUserIds array. Fails silently if the global league document does not exist (non-blocking).",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-014",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Apply the late-joiner handicap rule: if the season has already started (scores exist), calculate a starting score of (lowest real score - 5) so the new user starts 5 points behind last place. Skips existing adjustment scores when determining the minimum.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-015",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Send a welcome email and a verification email to the new user via internal API endpoints. Both are fire-and-forget; failures are logged but do not block signup completion.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-016",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Log the successful registration to the audit_logs collection and generate a Firebase custom token so the client can sign in immediately without a second round-trip.",
      "dependencies": []
    },
    {
      "guid": "API_AUTH_SIGNUP-017",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level catch-all error handler for any unhandled exception during signup. Logs the error to error_logs and returns a generic 500 response with correlation ID for support tracing.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that calculates race scores for all teams based on submitted race results and team predictions. Core scoring engine for the Prix Six fantasy league.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Defines the shape of the incoming race result submission from the admin.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Represents a single team's score result for the API response.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Represents a ranked entry in the overall standings returned by the API.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Normalises a raceId/raceName by stripping GP/Sprint suffixes and collapsing whitespace to hyphens, so predictions filed under the base race name can be matched.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Creates a Firestore document ID for race results that preserves GP vs Sprint distinction (e.g. \"australia-gp\" or \"australia-sprint\").",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-006",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Main POST handler that orchestrates the entire scoring pipeline: auth check, admin verification, prediction resolution (including carry-forwards), score calculation, batch write of scores/results/audit, and standings aggregation.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-007",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Authenticates the request by verifying the Firebase Auth bearer token and confirms the user has admin privileges.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-008",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Parses and validates the race result request body, ensuring all six driver positions are provided.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Loads all users to build lookup maps from userId/teamId to team names, including secondary teams, for score attribution.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches all predictions across all users via a collectionGroup query, then organises them by team and race to support the carry-forward resolution logic.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-011",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Builds a nested map (teamId -> raceId -> prediction) from all prediction documents, keeping only the latest prediction per team per race. Handles both primary and secondary team predictions.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Resolves each team's effective prediction for the current race by checking for a race-specific prediction first, then falling back to the most recent prediction from any earlier race (carry-forward rule).",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-013",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Converts the latestPredictions map into a snapshot-like iterable format to maintain compatibility with the downstream scoring loop which was originally written against Firestore query snapshots.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-014",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Core scoring loop: iterates over each team's prediction, calculates points per driver using the hybrid position-based scoring system (calculateDriverPoints), applies the all-6 bonus, and prepares batch writes for score documents.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-015",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Creates synthetic prediction documents in Firestore for teams whose predictions were carried forward, ensuring the results page can find a prediction document for every scored team on every race.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-016",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Writes the official race result document to the race_results collection, storing the top-6 finishing order. Also creates an audit log entry for the result submission.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-017",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Aggregates all scores across all races to produce updated overall league standings with tie-aware ranking, returned in the API response.",
      "dependencies": []
    },
    {
      "guid": "API_CALCULATE_SCORES-018",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level error handler that catches any unhandled exception during scoring, logs it with a correlation ID, and returns a 500 response with the correlation ID for user-reportable error tracing.",
      "dependencies": []
    },
    {
      "guid": "API_DELETE_SCORES-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that deletes all scores and the race result document for a given race. Used by admins to undo/re-do scoring.",
      "dependencies": []
    },
    {
      "guid": "API_DELETE_SCORES-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Defines the shape of the incoming delete request, requiring the race identifier and optional display name.",
      "dependencies": []
    },
    {
      "guid": "API_DELETE_SCORES-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Normalises a raceId by stripping GP/Sprint suffixes, collapsing whitespace to hyphens, and lowercasing to match the format used when scores are stored.",
      "dependencies": []
    },
    {
      "guid": "API_DELETE_SCORES-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main POST handler that authenticates the admin, queries all score documents for the specified race, batch-deletes them along with the race result document, and logs an audit event.",
      "dependencies": []
    },
    {
      "guid": "API_DELETE_SCORES-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Authenticates the request by verifying the Firebase Auth bearer token and confirms the user has admin privileges before allowing score deletion.",
      "dependencies": []
    },
    {
      "guid": "API_DELETE_SCORES-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Parses the request body and validates that a raceId is provided, then normalises it to match the stored score format.",
      "dependencies": []
    },
    {
      "guid": "API_DELETE_SCORES-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Queries all score documents matching the normalised raceId, deletes them in a batch along with the race result document, and writes an audit log entry -- all committed atomically.",
      "dependencies": []
    },
    {
      "guid": "API_DELETE_SCORES-007",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level error handler that catches any unhandled exception during score deletion, logs it with a correlation ID, and returns a 500 response.",
      "dependencies": []
    },
    {
      "guid": "API_EMAIL_HEALTH-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that provides an email system health check for admins. Checks Graph API credentials, Firebase Admin connectivity, recent email success/failure rates, and email queue depth.",
      "dependencies": []
    },
    {
      "guid": "API_EMAIL_HEALTH-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for the health check response  structured result with overall status and individual check statuses for Graph credentials, Firebase Admin, recent emails, and queued emails.",
      "dependencies": []
    },
    {
      "guid": "API_EMAIL_HEALTH-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "GET handler  authenticates the caller via Bearer token, checks admin status, then assembles a health report by inspecting Graph API env vars, querying email_logs for failures in the last 24 hours, and checking email_queue for pending items. Returns overall status as healthy/degraded/unhealthy.",
      "dependencies": []
    },
    {
      "guid": "API_EMAIL_QUEUE-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that manages the email queue  supports fetching queued/failed emails (GET), sending or re-queuing emails with retry logic (POST), and deleting queued emails (DELETE). Central to the email delivery reliability system.",
      "dependencies": []
    },
    {
      "guid": "API_EMAIL_QUEUE-001",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Retry configuration constants  limits retry attempts to 3 and spaces retries 5 minutes apart to avoid hammering the Graph API during transient failures.",
      "dependencies": []
    },
    {
      "guid": "API_EMAIL_QUEUE-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for a queued email document  represents an email in the email_queue Firestore collection with its delivery status, retry metadata, and content.",
      "dependencies": []
    },
    {
      "guid": "API_EMAIL_QUEUE-003",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "GET handler  fetches queued emails from Firestore. In admin mode (includeAll=true), returns up to 100 emails regardless of status. In normal mode, returns only pending emails whose nextRetryAt has passed (ready to process).",
      "dependencies": []
    },
    {
      "guid": "API_EMAIL_QUEUE-004",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "POST handler  processes email queue actions. \"resend\" action re-queues failed emails by resetting their retry count and status to pending. \"push\" action sends pending emails via Graph API, recording successes in email_daily_stats and handling failures with exponential retry logic via handleEmailFailure.",
      "dependencies": []
    },
    {
      "guid": "API_EMAIL_QUEUE-005",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Handles email send failures with retry logic. If the retry count is below MAX_RETRY_ATTEMPTS (3), schedules a retry after RETRY_DELAY_MINUTES (5 min) by updating the queue document. If max retries are exhausted, marks the email as permanently failed.",
      "dependencies": []
    },
    {
      "guid": "API_EMAIL_QUEUE-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "DELETE handler  removes queued emails from Firestore. If specific emailIds are provided, deletes those; otherwise deletes all pending emails. Used by admins to clear the queue.",
      "dependencies": []
    },
    {
      "guid": "API_LOG_CLIENT_ERROR-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route for receiving and persisting client-side errors to Firestore. Provides a server endpoint so browser-based error handlers can log errors with correlation IDs to the error_logs collection.",
      "dependencies": []
    },
    {
      "guid": "API_LOG_CLIENT_ERROR-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Initialise Firebase Admin SDK if not already done. Supports both production (Application Default Credentials) and local development (service account file).",
      "dependencies": []
    },
    {
      "guid": "API_LOG_CLIENT_ERROR-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface defining the expected shape of client error payloads. Ensures type safety for the request body.",
      "dependencies": []
    },
    {
      "guid": "API_LOG_CLIENT_ERROR-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler that validates the incoming client error payload and writes it to the Firestore error_logs collection. Designed to be resilient  never returns an error that would worsen the client's already-errored state.",
      "dependencies": []
    },
    {
      "guid": "API_LOG_CLIENT_ERROR-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Basic validation  ensures the minimum required fields (correlationId and error message) are present.",
      "dependencies": []
    },
    {
      "guid": "API_LOG_CLIENT_ERROR-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Persist the client error to Firestore error_logs collection with full context, defaulting errorCode to PX-9001 (unknown) if not provided.",
      "dependencies": []
    },
    {
      "guid": "API_LOG_CLIENT_ERROR-006",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Catch-all error handler  logs to console but returns a simple 500. Intentionally does NOT call logError() to avoid recursive error logging. The client is already in an error state.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_HOT_NEWS_EMAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that broadcasts a hot news email to all users who have opted in to the newsFeed email preference. Enforces daily global and per-address rate limits, logs audit events, and tracks email stats.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_HOT_NEWS_EMAIL-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Rate-limiting constants  caps total daily emails at 30 globally and 5 per individual address to prevent abuse and protect Graph API quotas.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_HOT_NEWS_EMAIL-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for the incoming request body  content of the hot news, plus who triggered the update.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_HOT_NEWS_EMAIL-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for an entry in the email_daily_stats.emailsSent array  tracks each sent email for rate-limiting and audit.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_HOT_NEWS_EMAIL-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Returns today's date as an ISO date string (YYYY-MM-DD) for keying the email_daily_stats document.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_HOT_NEWS_EMAIL-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler  orchestrates the entire hot news email broadcast: validates input, logs audit event, checks rate limits, queries opted-in users, sends emails (including to verified secondary addresses), updates daily stats, and logs a summary audit event.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_HOT_NEWS_EMAIL-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Builds the HTML email body for hot news notifications, converting newline-separated content into styled HTML paragraphs with Prix Six branding.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_RESULTS_EMAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that sends race results emails to all users who have opted in (or not opted out) of results notifications. Each email is personalised with the user's prediction, score, and current standings.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_RESULTS_EMAIL-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Helper to obtain the Firestore db instance, wrapping getFirebaseAdmin for backwards compatibility.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_RESULTS_EMAIL-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for the incoming request body  identifies the race, its official result, per-team scores, and current season standings.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_RESULTS_EMAIL-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "POST handler  queries all users who have not opted out of results notifications, builds a personalised results email for each (showing their prediction, score, race scores table, and season standings), sends via Graph API, and records delivery in email-tracking.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_RESULTS_EMAIL-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Builds the full HTML email body for race results, including the user's score hero section, official result table, user prediction, race scores table (sorted by points, user highlighted), and season standings table (user highlighted).",
      "dependencies": []
    },
    {
      "guid": "API_SEND_SECONDARY_VERIFICATION-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that sends a verification email for a user's secondary email address. Validates that the secondary email matches the user record, generates a CSPRNG token, stores it in Firestore with a 2-hour expiry, and sends a branded verification email via Graph API.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_SECONDARY_VERIFICATION-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Generates a cryptographically secure 32-byte hex token for secondary email verification links.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_SECONDARY_VERIFICATION-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler  validates required fields (uid, secondaryEmail), checks Graph API config, verifies user exists and secondary email matches their record, generates a verification token with 2-hour expiry, stores it in Firestore, builds a branded verification email with CTA button, sends via Graph API, and logs an audit event on success.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_VERIFICATION_EMAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that sends a primary email verification link to a user. Generates a CSPRNG token, stores it in Firestore with a 2-hour expiry, builds a branded HTML email, and sends via Graph API.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_VERIFICATION_EMAIL-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Generates a cryptographically secure 32-byte hex token for email verification links.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_VERIFICATION_EMAIL-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler  validates required fields (uid, email), checks Graph API config, generates a verification token with 2-hour expiry, stores it in Firestore, builds a branded verification email with CTA button, sends via Graph API, and logs an audit event on success.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_WELCOME_EMAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that sends a welcome email to a newly registered user with their team name and PIN.",
      "dependencies": []
    },
    {
      "guid": "API_SEND_WELCOME_EMAIL-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler  validates required fields (toEmail, teamName, pin), delegates to sendWelcomeEmail, and returns the result.",
      "dependencies": []
    },
    {
      "guid": "API_SUBMIT_PREDICTION-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route that accepts and stores a user's top-6 driver prediction for a specific race and team. Enforces server-side lockout rules (results exist, qualifying started).",
      "dependencies": []
    },
    {
      "guid": "API_SUBMIT_PREDICTION-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Defines the shape of the incoming prediction submission from the user.",
      "dependencies": []
    },
    {
      "guid": "API_SUBMIT_PREDICTION-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Main POST handler that authenticates the user, validates the prediction payload, enforces server-side lockout rules (race results exist or qualifying has started), and atomically writes the prediction and audit log to Firestore.",
      "dependencies": []
    },
    {
      "guid": "API_SUBMIT_PREDICTION-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Authenticates the request by verifying the Firebase Auth bearer token and confirms the authenticated user matches the userId in the request body (prevents submitting on behalf of another user).",
      "dependencies": []
    },
    {
      "guid": "API_SUBMIT_PREDICTION-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Validates that all required fields are present and that the predictions array contains exactly 6 driver IDs.",
      "dependencies": []
    },
    {
      "guid": "API_SUBMIT_PREDICTION-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Server-side lockout enforcement: checks if race results already exist in Firestore (locks predictions once results are entered) and if qualifying has started based on the RaceSchedule (time-based lockout). Two independent checks provide defence-in-depth.",
      "dependencies": []
    },
    {
      "guid": "API_SUBMIT_PREDICTION-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Atomically writes the prediction document to the user's predictions subcollection (using merge to allow updates) and creates an audit log entry, committed as a single batch.",
      "dependencies": []
    },
    {
      "guid": "API_SUBMIT_PREDICTION-007",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level error handler that catches any unhandled exception during prediction submission, logs it with a correlation ID, and returns a 500 response.",
      "dependencies": []
    },
    {
      "guid": "API_UPDATE_SECONDARY_EMAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route for adding, updating, or removing a user's secondary (communications) email address. Validates format, prevents duplicate/same-as-primary usage, resets verification status on change, and logs all changes to audit_logs.",
      "dependencies": []
    },
    {
      "guid": "API_UPDATE_SECONDARY_EMAIL-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Regex for basic email format validation  ensures the input looks like a valid email before database operations.",
      "dependencies": []
    },
    {
      "guid": "API_UPDATE_SECONDARY_EMAIL-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler that orchestrates secondary email management: validates uid, handles removal (null/empty), validates email format, checks for same-as-primary and in-use conflicts, updates Firestore, and logs audit events.",
      "dependencies": []
    },
    {
      "guid": "API_UPDATE_SECONDARY_EMAIL-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate that uid is present in the request.",
      "dependencies": []
    },
    {
      "guid": "API_UPDATE_SECONDARY_EMAIL-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Verify the user exists in Firestore before attempting any updates.",
      "dependencies": []
    },
    {
      "guid": "API_UPDATE_SECONDARY_EMAIL-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Handle removal of secondary email  deletes both secondaryEmail and secondaryEmailVerified fields from the user document, logs removal to audit_logs.",
      "dependencies": []
    },
    {
      "guid": "API_UPDATE_SECONDARY_EMAIL-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Validate email format using regex, check secondary email is not the same as the primary email, and check it is not already in use as another user's primary email.",
      "dependencies": []
    },
    {
      "guid": "API_UPDATE_SECONDARY_EMAIL-007",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Persist the new secondary email (normalised to lowercase) and reset verification status to false, then log the change to audit_logs.",
      "dependencies": []
    },
    {
      "guid": "API_UPDATE_SECONDARY_EMAIL-008",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level error handler  catches any unhandled exceptions, logs to error_logs, and returns a safe 500 response with correlation ID.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_EMAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route for verifying a user's primary email address via a token-based verification link. Validates the token, marks email as verified in both Firestore and Firebase Auth, and logs an audit event.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_EMAIL-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler that validates an email verification token (constant-time comparison), checks expiry and re-use, updates both Firestore and Firebase Auth verified status, marks the token as used, and writes an audit log.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_EMAIL-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate that both required fields (token and uid) are present in the request.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_EMAIL-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Retrieve the verification token document and perform security checks: existence, constant-time token comparison (prevents timing attacks), re-use check, and expiry check.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_EMAIL-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Mark the user's email as verified in Firestore users collection.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_EMAIL-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Also mark as verified in Firebase Auth for consistency (Golden Rule #3). Auth failure is non-fatal  Firestore was already updated.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_EMAIL-006",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Mark the verification token as used to prevent re-use, and write an audit log entry.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_EMAIL-007",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level error handler  catches any unhandled exceptions, logs to error_logs, and returns a safe 500 response with correlation ID.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_SECONDARY_EMAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "API route for verifying a user's secondary (communications) email address via a token-based verification link. Similar to primary email verification but operates on the secondary_email_verification_tokens collection and does NOT update Firebase Auth.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_SECONDARY_EMAIL-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler that validates a secondary email verification token (constant-time comparison), checks expiry and re-use, verifies the secondary email has not changed since the token was issued, updates Firestore verified status, marks the token as used, and writes an audit log.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_SECONDARY_EMAIL-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate that both required fields (token and uid) are present in the request.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_SECONDARY_EMAIL-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Retrieve the secondary email verification token document and perform security checks: existence, constant-time token comparison (prevents timing attacks), re-use check, and expiry check.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_SECONDARY_EMAIL-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Verify the user still exists and their secondary email has not changed since the verification token was issued. Prevents verifying a stale email address.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_SECONDARY_EMAIL-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Mark the user's secondary email as verified in Firestore. NOTE: Does NOT update Firebase Auth  secondary email is for communications only, not login.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_SECONDARY_EMAIL-006",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Mark the verification token as used to prevent re-use, and write an audit log entry.",
      "dependencies": []
    },
    {
      "guid": "API_VERIFY_SECONDARY_EMAIL-007",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Top-level error handler  catches any unhandled exceptions, logs to error_logs, and returns a safe 500 response with correlation ID.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "HTTPS-to-HTTP proxy for the WhatsApp worker running on Azure Container Instances. Bridges the browser (HTTPS-only) to the internal HTTP-only WhatsApp worker, with admin auth, endpoint whitelisting, and HMAC request signing.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Internal URL constant for the WhatsApp worker  HTTP-only, not exposed to browsers. Traffic flows: Browser -> this proxy (HTTPS) -> worker (HTTP).",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Generate HMAC SHA-256 signature for outgoing worker requests so the worker can verify requests originate from this trusted proxy.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "GET handler  proxies read-only requests to the WhatsApp worker. Verifies admin auth, whitelists allowed endpoints (health, status, qr), signs the request, and returns the worker's response. QR endpoint returns plain text; others return JSON.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Verify the caller has a valid Firebase Auth token and is an admin user. Two-step check: token verification then Firestore isAdmin lookup.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Extract and validate the endpoint query parameter against a whitelist of allowed GET endpoints. Prevents arbitrary endpoint access on the worker.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Forward the validated GET request to the WhatsApp worker with HMAC signature. Handles QR endpoint as plain text, all others as JSON.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-007",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Catch-all error handler for GET requests  logs to console and returns a generic proxy error.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-008",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "POST handler  proxies write requests to the WhatsApp worker. Verifies admin auth, whitelists allowed POST endpoints (ping, trigger-test), signs the request, and returns the worker's JSON response.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-009",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Verify the caller has a valid Firebase Auth token and is an admin user. Same two-step check as GET handler.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-010",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Extract and validate the endpoint query parameter against a whitelist of allowed POST endpoints. Prevents arbitrary write operations on the worker.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Forward the validated POST request to the WhatsApp worker with HMAC signature and return the JSON response.",
      "dependencies": []
    },
    {
      "guid": "API_WHATSAPP_PROXY-012",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Catch-all error handler for POST requests  logs to console and returns a generic proxy error.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_ADMIN_TAB-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Import statement for BackupHealthDashboard component in the admin page. Lazy-loaded by Next.js when the admin route is visited.",
      "dependencies": [
        "BACKUP_DASHBOARD-000"
      ]
    },
    {
      "guid": "BACKUP_ADMIN_TAB-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "14th TabsTrigger in admin page TabsList. Sky-600 colour with HardDrive icon. Activates the Backups tab content panel on click.",
      "dependencies": [
        "BACKUP_ADMIN_TAB-003"
      ]
    },
    {
      "guid": "BACKUP_ADMIN_TAB-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "TabsContent wrapper that mounts BackupHealthDashboard when the Backups tab is active. Component subscribes to backup_status/latest and renders three status cards.",
      "dependencies": [
        "BACKUP_DASHBOARD-010"
      ]
    },
    {
      "guid": "BACKUP_DASHBOARD-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Root module for BackupHealthDashboard.tsx. Admin-only React component that subscribes to backup_status/latest in real-time and renders three cards: Backup Status, Immutability Lock, Smoke Test.",
      "dependencies": [
        "BACKUP_DASHBOARD-001",
        "BACKUP_DASHBOARD-002",
        "BACKUP_DASHBOARD-003",
        "BACKUP_DASHBOARD-004",
        "BACKUP_DASHBOARD-010"
      ]
    },
    {
      "guid": "BACKUP_DASHBOARD-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "BackupStatus TypeScript interface mirroring the Firestore document shape written by Cloud Functions. All fields optional to handle partial population and first-run state.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_DASHBOARD-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "TimestampDisplay component: renders Firestore Timestamps as relative time ('3 hours ago') with absolute ISO timestamp on hover tooltip. Falls back to 'Never' when no timestamp exists.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_DASHBOARD-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "CopyButton component: one-click clipboard copy for correlation IDs. Shows green check for 2 seconds as visual confirmation. Used by ops to paste IDs into Cloud Logging search.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_DASHBOARD-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "StatusBadge component: renders colour-coded badge for SUCCESS (green), FAILED (red), or No data (outline). Used in Backup Status and Smoke Test card headers.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_DASHBOARD-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Trigger a manual backup via the manualBackup callable Cloud Function.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_DASHBOARD-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "BackupHealthDashboard main component. Handles four states: loading (skeleton cards), error (PX-7001 alert), first-run (info alert), and normal (three-column card grid). Subscribes to backup_status/latest via useDoc.",
      "dependencies": [
        "BACKUP_DASHBOARD-011",
        "BACKUP_DASHBOARD-012",
        "BACKUP_DASHBOARD-013",
        "BACKUP_DASHBOARD-014",
        "BACKUP_DASHBOARD-020"
      ]
    },
    {
      "guid": "BACKUP_DASHBOARD-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoized DocumentReference for backup_status/latest. Returns null if Firestore isn't ready or user isn't admin, preventing unnecessary subscriptions.",
      "dependencies": [
        "BACKUP_FUNCTIONS-005"
      ]
    },
    {
      "guid": "BACKUP_DASHBOARD-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Loading state: renders 3 skeleton cards matching the three-column layout to prevent layout shift during Firestore subscription establishment.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_DASHBOARD-013",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Error state: creates PX-7001 (BACKUP_STATUS_READ_FAILED) with correlation ID and renders a destructive Alert with copyable error details. Client-side only  does not write to error_logs.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_DASHBOARD-014",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "First-run state: handles the case where backup_status/latest doesn't exist yet (dailyBackup hasn't run). Shows info alert with deployment instructions. useDoc subscription remains active so it auto-updates when the doc is created.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_DASHBOARD-020",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Normal state renderer: three-column responsive grid (1 col mobile, 3 col desktop) containing Backup Status, Immutability Lock, and Smoke Test cards.",
      "dependencies": [
        "BACKUP_DASHBOARD-021",
        "BACKUP_DASHBOARD-022",
        "BACKUP_DASHBOARD-023"
      ]
    },
    {
      "guid": "BACKUP_DASHBOARD-021",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Backup Status Card: displays last backup timestamp, GCS path, correlation ID (with CopyButton), and error message (if failed). StatusBadge shows SUCCESS/FAILED in header.",
      "dependencies": [
        "BACKUP_DASHBOARD-002",
        "BACKUP_DASHBOARD-003",
        "BACKUP_DASHBOARD-004"
      ]
    },
    {
      "guid": "BACKUP_DASHBOARD-022",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Immutability Lock Card: displays bucket name, retention period, lock type, and an amber warning that the lock is irreversible. Mostly static/informational since the lock is configured at infrastructure level by provision_recovery_env.sh.",
      "dependencies": [
        "PROVISION_RECOVERY-010"
      ]
    },
    {
      "guid": "BACKUP_DASHBOARD-023",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Smoke Test Card: displays last smoke test timestamp, correlation ID, error message, or explanatory text when the test hasn't run yet. StatusBadge shows SUCCESS/FAILED in header.",
      "dependencies": [
        "BACKUP_DASHBOARD-002",
        "BACKUP_DASHBOARD-003",
        "BACKUP_DASHBOARD-004"
      ]
    },
    {
      "guid": "BACKUP_ERRORS-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "PX-7xxx error code definitions for backup & recovery system. Seven codes covering status read failure (dashboard), export failures (Firestore and Auth), smoke test failure, restore failure, cleanup failure, and heartbeat absence (Dead Man's Switch).",
      "dependencies": [
        "BACKUP_DASHBOARD-013",
        "BACKUP_FUNCTIONS-015",
        "BACKUP_FUNCTIONS-026"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Root module for Prix Six Cloud Functions. Provides automated daily Firestore+Auth backup and weekly Sunday smoke test. Entry point for both scheduled Cloud Functions.",
      "dependencies": [
        "BACKUP_FUNCTIONS-001",
        "BACKUP_FUNCTIONS-002",
        "BACKUP_FUNCTIONS-010",
        "BACKUP_FUNCTIONS-020"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Firebase Admin SDK initialisation at cold-start. Required before any getFirestore()/getAuth() call. Runs once per Cloud Function instance lifecycle.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_FUNCTIONS-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Centralised configuration constants: project IDs, bucket name, region, status collection/doc path. Single point of change if the project is forked or renamed.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_FUNCTIONS-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generates unique correlation IDs (prefix_timestamp36_random6) for end-to-end tracing across Cloud Functions, Firestore status doc, GCS metadata, and admin dashboard.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_FUNCTIONS-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generates date-based GCS folder names (YYYY-MM-DD or YYYY-MM-DD-SUNDAY). Sunday suffix is cosmetic only  retention is identical for all days.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_FUNCTIONS-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Merges partial status fields into backup_status/latest Firestore doc using set(merge:true). Allows dailyBackup and runRecoveryTest to independently update their own fields without clobbering each other.",
      "dependencies": [
        "BACKUP_FUNCTIONS-002",
        "BACKUP_DASHBOARD-011"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "dailyBackup scheduled Cloud Function (02:00 UTC daily). Orchestrates Firestore managed export, Auth JSON pagination export, status write, and BACKUP_HEARTBEAT structured log emission. Heartbeat emitted on both success and failure to prevent Dead Man's Switch double-alerting.",
      "dependencies": [
        "BACKUP_FUNCTIONS-002",
        "BACKUP_FUNCTIONS-003",
        "BACKUP_FUNCTIONS-004",
        "BACKUP_FUNCTIONS-005",
        "BACKUP_FUNCTIONS-011",
        "BACKUP_FUNCTIONS-012",
        "BACKUP_FUNCTIONS-013",
        "BACKUP_FUNCTIONS-014",
        "BACKUP_FUNCTIONS-015"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-011",
      "version": 4,
      "logic_category": "ORCHESTRATION",
      "description": "Firestore managed export via FirestoreAdminClient.exportDocuments() (v1 admin API). The regular Firestore data client does NOT have exportDocuments() or databasePath()  must use the admin client from @google-cloud/firestore v1 namespace.",
      "dependencies": [
        "PROVISION_RECOVERY-062",
        "PROVISION_RECOVERY-064"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-012",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Auth user export via Admin SDK listUsers() pagination (1000/page). Serialises user metadata (uid, email, displayName, providers, customClaims) to JSON in GCS. Does NOT include password hashes  Firebase Auth does not expose them.",
      "dependencies": [
        "PROVISION_RECOVERY-063"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Writes SUCCESS status to backup_status/latest after both Firestore and Auth exports complete. Explicitly nulls lastBackupError to clear any previous failure state.",
      "dependencies": [
        "BACKUP_FUNCTIONS-005"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-014",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Emits BACKUP_HEARTBEAT structured JSON log on the success path. This log feeds the log-based metric backup_heartbeat_count, which the Dead Man's Switch MQL alert monitors for absence >25 hours.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_FUNCTIONS-015",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Error handler for dailyBackup. Writes FAILED status to backup_status/latest, emits BACKUP_HEARTBEAT with severity:ERROR (to prevent DMS double-alert), then re-throws so Cloud Functions marks the invocation as failed.",
      "dependencies": [
        "BACKUP_FUNCTIONS-005"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-020",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "runRecoveryTest scheduled Cloud Function (04:00 UTC Sundays). Imports the latest backup into a disposable recovery project, verifies critical documents exist, cleans up, and writes smoke test result to status doc.",
      "dependencies": [
        "BACKUP_FUNCTIONS-002",
        "BACKUP_FUNCTIONS-003",
        "BACKUP_FUNCTIONS-005",
        "BACKUP_FUNCTIONS-021",
        "BACKUP_FUNCTIONS-022",
        "BACKUP_FUNCTIONS-023",
        "BACKUP_FUNCTIONS-024",
        "BACKUP_FUNCTIONS-025",
        "BACKUP_FUNCTIONS-026"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-021",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Reads lastBackupPath from backup_status/latest. Guards against the case where no backup has ever run  fails loudly so ops investigates rather than silently skipping the smoke test.",
      "dependencies": [
        "BACKUP_FUNCTIONS-005"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-022",
      "version": 4,
      "logic_category": "ORCHESTRATION",
      "description": "Imports the Firestore export into the recovery project via FirestoreAdminClient.importDocuments() (v1 admin API). Must use the admin client, not the data client. Recovery project is ephemeral and cleaned up after verification.",
      "dependencies": [
        "PROVISION_RECOVERY-065"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-023",
      "version": 4,
      "logic_category": "VALIDATION",
      "description": "Smoke test verification using the regular Firestore data client (not admin client  data reads use collection/doc/get). Checks system_status/heartbeat exists AND users collection has at least one document. Both failing = backup is empty or corrupt.",
      "dependencies": [
        "PROVISION_RECOVERY-066"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-024",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Post-verification cleanup: deletes all data in the recovery project Firestore. Non-fatal  cleanup failure is logged but does not fail the smoke test because the primary goal (verification) has already succeeded.",
      "dependencies": [
        "BACKUP_FUNCTIONS-030"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-025",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Writes SUCCESS smoke test status to backup_status/latest and emits SMOKE_TEST_COMPLETE structured log with verification results.",
      "dependencies": [
        "BACKUP_FUNCTIONS-005"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-026",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Error handler for runRecoveryTest. Writes FAILED status to backup_status/latest with the error message, then re-throws.",
      "dependencies": [
        "BACKUP_FUNCTIONS-005"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-030",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "deleteAllCollections: enumerates all top-level collections in recovery Firestore and batch-deletes every document. Errors are caught and logged (non-fatal by design  next import overwrites anyway).",
      "dependencies": [
        "BACKUP_FUNCTIONS-031"
      ]
    },
    {
      "guid": "BACKUP_FUNCTIONS-031",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "deleteCollection: batch-deletes all documents in a single collection using batches of 500 (Firestore maximum). Loops until collection is empty. Does not recurse into subcollections.",
      "dependencies": []
    },
    {
      "guid": "BACKUP_RULES-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Firestore security rules for backup_status collection. Admin-only read access for BackupHealthDashboard subscription. All writes denied at rules level  Cloud Functions write via Admin SDK which bypasses rules.",
      "dependencies": [
        "BACKUP_DASHBOARD-011",
        "BACKUP_FUNCTIONS-005"
      ]
    },
    {
      "guid": "COMPONENT_APP_SIDEBAR-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main application sidebar component providing navigation links, admin panel access,",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_APP_SIDEBAR-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Static menu item configuration defining all navigation routes available to regular users.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_APP_SIDEBAR-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Exported sidebar component that renders the full navigation sidebar including header",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_APP_SIDEBAR-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Handles user logout by first setting the Firestore presence document to offline,",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Full-screen cinematic intro animation for the About page. Plays a 24-second F1-themed sequence through four phases: Grid Entry (version display), Telemetry (live stats), Module Tour (feature showcase), and Finish (chequered flag + logo). First-time visitors see this automatically; returning visitors can replay it.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Props interface for CinematicIntro. Receives live data (totalTeams, onlineUsers) and a completion callback.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "F1 brand red colour constant used throughout the intro for visual consistency.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Timing configuration for the four animation phases. Each phase has a start and end time in milliseconds, controlling the overall 24-second animation timeline.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Static data for the module tour phase (Phase 3). Each entry has a Lucide icon, display name, and short description representing a key app feature.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Animated number counter that eases from 0 to a target value over a specified duration. Used in the telemetry phase to display live stats with a dramatic count-up effect.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Drives the count-up animation using setInterval at ~60fps. Applies a cubic ease-out curve for a decelerating effect.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Text component that periodically applies a brief RGB-shift glitch effect, creating a cyberpunk/HUD aesthetic for the version number display.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Renders a CSS perspective grid with horizontal and vertical lines, creating a retro F1 starting grid / Tron-like visual. Horizontal lines animate downward when isMoving is true.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Heads-Up Display overlay with vignette darkening, scan lines, corner brackets, and status readouts. Creates an immersive cockpit/telemetry screen aesthetic.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Animated chequered flag pattern that sweeps across the screen from left to right during the finish phase, signalling the end of the intro sequence.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "SVG logo for \"PRIX SIX\" with animated path drawing. Each letter (P, R, I, X) is drawn sequentially using Framer Motion's pathLength animation, followed by a fade-in \"SIX\" text element.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-012",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main CinematicIntro component. Orchestrates the 4-phase animation sequence using timed state transitions. Renders a full-screen black overlay with phase-specific content, a skip button, and a progress bar.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Skip handler allowing users to bypass the intro at any point. Sets phase to 'done' and immediately calls onComplete.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-014",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Master timeline orchestrator. Schedules all phase transitions, module cycling, flag display, and completion using setTimeout calls based on PHASE_TIMINGS. All timers are cleaned up on unmount.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_CINEMATIC_INTRO-015",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main render: full-screen fixed overlay with AnimatePresence managing phase transitions. Each phase renders its own motion.div with entry/exit animations. Skip button and progress bar are always visible.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_DASHBOARD_CLIENT-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Client-side dashboard component providing real-time countdown to qualifying,",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_DASHBOARD_CLIENT-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Determines deadline urgency level based on time remaining until qualifying.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_DASHBOARD_CLIENT-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface for the countdown time breakdown (days/hours/minutes/seconds).",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_DASHBOARD_CLIENT-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Pure function to compute remaining time from now until targetDate.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_DASHBOARD_CLIENT-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main client dashboard component  renders countdown timer, deadline warnings,",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_DASHBOARD_CLIENT-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Memoised prediction document ID constructed from user ID and race ID.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_DASHBOARD_CLIENT-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised Firestore document reference for the user's prediction for this race.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_DASHBOARD_CLIENT-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Recurring 1-second timer that recalculates the countdown to qualifying.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_EMAIL_BANNER-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Dismissable banner component that prompts unverified users to verify their email address.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_EMAIL_BANNER-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Main exported component that renders the email verification banner with send/refresh",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_EMAIL_BANNER-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Triggers the verification email send flow with loading state and result feedback.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_EMAIL_BANNER-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Refreshes the email verification status by reloading the Firebase Auth user.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "PredictionEditor component: the core prediction interface where users select, reorder, and submit their top-6 driver predictions for a race. Also provides AI-powered analysis with configurable weights, countdown timer, apply-to-all-teams option, and a change log.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Configuration array defining the 11 AI analysis facets (9 data-driven + 2 personality-driven). Each facet has a key matching AnalysisWeights, a display label, icon emoji, and description.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Default weight values for each AI analysis facet. Data facets default to 7, personality facets to 5.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Maximum total weight budget (11 facets x 7 = 77). Enforces a constraint so users must trade off emphasis between facets.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Props interface for PredictionEditor. Receives driver list, lock state, initial predictions, race metadata, team info, and circuit name.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main PredictionEditor component. Manages prediction grid state, countdown timer, submission flow, AI analysis, and change history.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Load user's saved AI analysis weights from Firestore on mount. Overrides DEFAULT_WEIGHTS if the user has previously customised and saved their preferences.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Memoised calculation of the sum of all current weight values, used for budget enforcement and display.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Countdown timer that updates every second, showing time remaining until qualifying (the prediction deadline). Displays days/hours/minutes/seconds format and shows \"CLOSED\" when past.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Computed list of drivers not yet selected in the prediction grid, sorted alphabetically. Powers the \"Available Drivers\" panel.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Appends a change description to the history log (max 5 entries). Optionally includes a timestamp for significant actions like submissions.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Adds a driver to the first empty slot in the prediction grid. No-op if the grid is locked.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Removes a driver from a specific position in the prediction grid, setting that slot to null. No-op if the grid is locked.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Swaps a driver with the adjacent slot (up or down) to reorder predictions. No-op if locked or at grid boundary.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-014",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Submits the prediction to the server via /api/submit-prediction. Supports multi-team submission when \"Apply to All\" is checked. Validates grid completeness and user authentication before sending.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-015",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Handles weight slider changes with budget enforcement. Caps the new value if it would exceed MAX_TOTAL_WEIGHT.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-016",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Resets all analysis weights back to DEFAULT_WEIGHTS values.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-017",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Persists the current AI analysis weights to the user's Firestore document. Fire-and-forget: failure is logged but not shown to the user.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-018",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Requests AI-powered race analysis from /api/ai/analysis with the current predictions and weights. Validates grid completeness first. Handles errors with correlation IDs and user-copyable error toasts per Golden Rule #1.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_PREDICTION_EDITOR-019",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main render: two-column layout with prediction grid card (left/top) and sidebar (right/bottom) containing available drivers, change log, and AI analysis panel. Full-width AI result card spans below both columns when analysis is active.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_VERSION_HISTORY-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Developer-facing version history component that displays a timeline of git commits",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_VERSION_HISTORY-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for a single commit entry matching the structure in commit-history.json.",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_VERSION_HISTORY-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main exported component that renders the version history card with commit timeline,",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_VERSION_HISTORY-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Classifies a commit message into a display category (FEATURE, FIX, PERF, CHORE, UPDATE)",
      "dependencies": []
    },
    {
      "guid": "COMPONENT_VERSION_HISTORY-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Strips the conventional commit prefix (feat:, fix:, chore:, etc.) and version prefix",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Central Firebase context provider that manages authentication state, user profile data,",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Defines the shape of user email notification preferences stored in Firestore.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Defines AI analysis weight sliders for race prediction assistance.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Extended user profile interface combining Firebase Auth identity with Firestore profile data.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Standard return type for all authentication operations (login, signup, PIN changes, etc.).",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Full type definition for the Firebase context, exposing all Firebase services, user state,",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "React context instance that holds the full Firebase state and auth operations.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Root provider component that initialises Firebase auth listener, manages user profile",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Sets up a two-layer real-time listener: (1) Firebase Auth state changes trigger",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-009",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Authenticates a user via server-side PIN verification API, then signs in using the",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Registers a new user via server-side API (which uses Admin SDK for Firestore writes",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin-only operation to update a user's profile via server-side API. Handles both",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin-only operation to delete a user via server-side API. Removes both the Firestore",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Allows the current authenticated user to create a secondary team via server-side API.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-014",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Signs out the current user, clears local state, and redirects to the login page.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-015",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Initiates a server-side PIN reset for the given email address. The API generates a",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-016",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Changes the current user's PIN (password) via Firebase Auth, clears the mustChangePin",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-017",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Sends a primary email verification via the custom Graph API endpoint (not Firebase's",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-018",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Reloads the Firebase Auth user to check if email has been verified externally (e.g.,",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-019",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Updates or removes the user's secondary email address via server-side API.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-020",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Sends a verification email to the user's secondary email address via the dedicated",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-021",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Computed boolean that merges Firebase Auth and Firestore email verification status.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-022",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised context value object that bundles all Firebase services, user state, and",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-023",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Primary hook for accessing the full Firebase context. Throws if used outside the provider.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-024",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Convenience hook that extracts only auth-related fields and operations from the context.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-025",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Typed hook that returns the Firestore instance, throwing if unavailable.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-026",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Typed hook that returns the FirebaseApp instance, throwing if unavailable.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-027",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Typed hook that returns the Firebase Storage instance, throwing if unavailable.",
      "dependencies": []
    },
    {
      "guid": "FIREBASE_PROVIDER-028",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Typed hook that returns the Firebase Functions instance, throwing if unavailable.",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Attack detection system that identifies bot attacks, credential stuffing, and distributed login attacks against the authentication layer.",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Defines numeric thresholds for each attack type (bot, credential stuffing, distributed) including attempt counts and time windows.",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Defines TypeScript types for attack classifications and severity levels used across the detection system and admin UI.",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Defines the shape of a login attempt record stored in the login_attempts Firestore collection.",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Defines the shape of an attack alert record stored in the attack_alerts Firestore collection.",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Persists a login attempt (successful or failed) to the login_attempts Firestore collection for later analysis.",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-006",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Orchestrates all three attack detection checks (bot, credential stuffing, distributed) and creates alerts for newly detected attacks, deduplicating against existing unacknowledged alerts.",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Detects bot attacks by counting failed login attempts from a single IP within the configured time window (10+ in 5 minutes).",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Detects credential stuffing by counting unique email addresses targeted from a single IP within the configured time window (5+ accounts in 5 minutes).",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-009",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Detects distributed attacks by counting unique IPs targeting a single email with sufficient failures within the configured time window (5+ IPs and 8+ failures in 10 minutes).",
      "dependencies": []
    },
    {
      "guid": "LIB_ATTACK_DETECTION-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Persists a detected attack alert to the attack_alerts Firestore collection and logs a console warning for server-side monitoring.",
      "dependencies": []
    },
    {
      "guid": "LIB_AUDIT-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Client-side audit logging module providing session correlation IDs, Firestore audit event logging, automatic navigation tracking, and permission error reporting.",
      "dependencies": []
    },
    {
      "guid": "LIB_AUDIT-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Module-level singleton storing the session correlation ID, ensuring all audit events within a single browser session share the same traceable identifier.",
      "dependencies": []
    },
    {
      "guid": "LIB_AUDIT-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generates a RFC 4122 v4 GUID string using Math.random for use as session correlation IDs.",
      "dependencies": []
    },
    {
      "guid": "LIB_AUDIT-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Returns the current session's correlation ID, lazily generating one on first access to ensure all audit events in a session are linkable.",
      "dependencies": []
    },
    {
      "guid": "LIB_AUDIT-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Module-level flag intended to control whether audit logging is enabled, allowing future integration with a global configuration system.",
      "dependencies": []
    },
    {
      "guid": "LIB_AUDIT-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Writes an audit event to the audit_logs Firestore collection as a fire-and-forget operation, attaching user ID, action description, details, correlation ID, and server timestamp.",
      "dependencies": []
    },
    {
      "guid": "LIB_AUDIT-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "React hook that automatically logs page navigation events to the audit trail, distinguishing between initial page load and subsequent route changes.",
      "dependencies": []
    },
    {
      "guid": "LIB_AUDIT-007",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Logs Firestore permission errors to console only (not to Firestore) to avoid circular permission failures when the user lacks write access to audit_logs.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Central consistency-checking library for the Prix Six application.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Define the set of domain categories that consistency checks cover.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Severity levels for individual issues found during consistency checks.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Overall status of a single category check, derived from the worst severity among its issues.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Represents a single validation issue found during a consistency check.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Aggregate counts of each scoring type across all validated scores.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Standard return type for every consistency check function.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-007",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Top-level summary of all consistency checks run in a single audit session.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-008",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Lightweight representation of a user record for consistency validation.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-009",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Lightweight representation of a prediction record for consistency validation.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-010",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Lightweight representation of an official race result for consistency validation.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-011",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Lightweight representation of a score record for consistency validation.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-012",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Lightweight representation of a league record for consistency validation.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-013",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Simple email format validation regex. Checks for non-whitespace characters",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-014",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generate a unique correlation ID for a consistency check audit session.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-015",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Normalize a race name or ID to a canonical lowercase-hyphenated format.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-016",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Build a Set of all valid driver IDs from the static F1Drivers reference data.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-017",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Build a Set of all valid race names from the static RaceSchedule reference data.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-018",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Build a Set of all valid race IDs in normalized form (lowercase, hyphenated)",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-019",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Validate the entire users collection for data integrity. Checks:",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-020",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate the static F1Drivers array from data.ts for completeness and uniqueness.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-021",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate the static RaceSchedule array from data.ts for completeness and correctness.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-022",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Helper function to validate whether a given ID represents a valid user",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-023",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate all prediction documents for structural integrity and referential",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-024",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate that all registered teams (both primary and secondary) have at",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-025",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Validate all race result documents for structural integrity. Checks:",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-026",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Local scoring constants derived from the shared scoring-rules.ts module.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-027",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Recalculate the expected score for a single prediction against a race result,",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-028",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "The most comprehensive check function. Validates all score documents against",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-029",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate that standings (cumulative points per user) are internally consistent.",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-030",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Validate all league documents for structural integrity and referential",
      "dependencies": []
    },
    {
      "guid": "LIB_CONSISTENCY-031",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Aggregate all individual CheckResult objects into a single ConsistencyCheckSummary.",
      "dependencies": []
    },
    {
      "guid": "LIB_DATA-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Provides standing data for F1 drivers and race schedule used throughout the app.",
      "dependencies": []
    },
    {
      "guid": "LIB_DATA-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Define the shape of a Driver object used across the application.",
      "dependencies": []
    },
    {
      "guid": "LIB_DATA-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Master list of all F1 drivers for the 2026 season with their team assignments,",
      "dependencies": []
    },
    {
      "guid": "LIB_DATA-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Resolve a driver ID to their profile image URL via the placeholder images lookup.",
      "dependencies": []
    },
    {
      "guid": "LIB_DATA-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Resolve a driver ID (lowercase) to their display name (proper case).",
      "dependencies": []
    },
    {
      "guid": "LIB_DATA-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Derive a 3-letter uppercase code from a driver ID (e.g., \"hamilton\" -> \"HAM\").",
      "dependencies": []
    },
    {
      "guid": "LIB_DATA-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Convert an array of driver IDs into a comma-separated string of display names.",
      "dependencies": []
    },
    {
      "guid": "LIB_DATA-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Define the shape of a Race object including timing, location, sprint flag, and results.",
      "dependencies": []
    },
    {
      "guid": "LIB_DATA-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Master race calendar for the 2026 F1 season (24 races). Defines qualifying deadlines",
      "dependencies": []
    },
    {
      "guid": "LIB_DATA-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Find the next upcoming race based on the current date by comparing qualifying times.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Server-side email sending module using Microsoft Graph API via Azure AD credentials. Provides welcome emails and generic email dispatch with rate-limiting, queuing, and Firestore logging.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Initialise and return a Firebase Admin Firestore instance for server-side email logging. Uses service account credentials if available, otherwise falls back to default project initialisation.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL-002",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Admin email address constant used as the default sender fallback.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generate a RFC 4122 v4-style GUID for uniquely identifying each email sent, enabling tracking and audit trail lookup.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Create and return an authenticated Microsoft Graph API client using Azure AD client credentials (tenant ID, client ID, client secret). This client is used to send emails via the Graph /sendMail endpoint.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for the result returned by email-sending functions, indicating success/failure, the tracking GUID, optional error detail, and whether the email was queued due to rate limiting.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL-006",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for the parameters required to send a welcome email, including recipient, team name, PIN, and optional Firestore instance for rate-limit tracking.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL-007",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Send a branded welcome email to a newly registered user containing their team name and 6-digit PIN. Enforces rate limiting via email-tracking, queues if rate-limited, logs success/failure to email_logs collection, and returns a tracking GUID.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL-008",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for generic email parameters (recipient, subject, HTML content) used by the general-purpose sendEmail function.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL-009",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Send a generic email with arbitrary HTML content via Microsoft Graph API. Appends a standard footer with tracking GUID and Prix Six branding. Logs success/failure to email_logs collection for admin audit.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Client-side email tracking and rate-limiting module. Manages daily email statistics, enforces global and per-address send limits, provides email queuing for rate-limited messages, and generates daily summary HTML reports.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Rate-limit constants defining the maximum number of emails allowed per day globally and per individual recipient address.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for daily email statistics stored in the email_daily_stats Firestore collection, tracking total sent count, individual email log entries, and whether the daily summary has been dispatched.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for an individual email log entry within the daily stats, capturing recipient, subject, type, team, tracking GUID, timestamp, and delivery status.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for a queued email document stored in the email_queue Firestore collection when rate limits prevent immediate sending.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Return today's date as a YYYY-MM-DD string for use as the Firestore document ID in email_daily_stats.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Retrieve or create the daily email statistics document for today from the email_daily_stats Firestore collection. If no document exists for today, initialises one with zero counts.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Count how many emails have been sent to a specific email address today, using case-insensitive matching against the daily stats log.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Check whether the system is allowed to send an email to the given address by validating against the daily global limit and per-address limit. The admin email is exempt from per-address limits.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Record a successfully sent email in today's daily stats document by incrementing the total count and appending the log entry to the emailsSent array.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-010",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Queue an email for later sending when rate limits prevent immediate dispatch. Creates a document in the email_queue Firestore collection with pending status.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-011",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Retrieve the list of all email log entries recorded in today's daily stats, for use in generating the daily summary report.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Mark the daily summary email as sent in today's stats document to prevent duplicate summary emails within the same day.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Check whether the daily summary email has already been sent today, to prevent duplicate summaries.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-014",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Retrieve all pending queued emails from the email_queue Firestore collection for batch processing.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-015",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Update the status of a queued email document after processing (sent or failed), recording the processing timestamp and optional error message.",
      "dependencies": []
    },
    {
      "guid": "LIB_EMAIL_TRACKING-016",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generate a styled HTML email body for the daily email summary report, showing counts of sent, queued, and failed emails in a table format with statistics boxes.",
      "dependencies": []
    },
    {
      "guid": "LIB_ERROR_CODES-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Central error code registry and error handling utilities for the Prix Six application.",
      "dependencies": []
    },
    {
      "guid": "LIB_ERROR_CODES-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Master registry of all application error codes organised by category.",
      "dependencies": []
    },
    {
      "guid": "LIB_ERROR_CODES-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Derive a union type of all valid error code keys for type-safe error code references.",
      "dependencies": []
    },
    {
      "guid": "LIB_ERROR_CODES-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Define the shape of a structured application error with all four pillars",
      "dependencies": []
    },
    {
      "guid": "LIB_ERROR_CODES-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generate a unique client-side correlation ID for error tracking.",
      "dependencies": []
    },
    {
      "guid": "LIB_ERROR_CODES-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Factory function to create a fully populated AppError object from an error code key,",
      "dependencies": []
    },
    {
      "guid": "LIB_ERROR_CODES-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Format an AppError into title, description, and copyable text for UI display.",
      "dependencies": []
    },
    {
      "guid": "LIB_ERROR_CODES-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Heuristically map a raw error message string to the most appropriate ErrorCode key.",
      "dependencies": []
    },
    {
      "guid": "LIB_FILE_UPLOAD-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Client-side file upload utility module for profile photo management. Provides image validation, upload with progress tracking to Firebase Storage, deletion of old photos, and client-side image compression using canvas.",
      "dependencies": []
    },
    {
      "guid": "LIB_FILE_UPLOAD-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Constants defining the allowed image MIME types and maximum file size (5MB) for profile photo uploads.",
      "dependencies": []
    },
    {
      "guid": "LIB_FILE_UPLOAD-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for the result of file validation, indicating whether the file passes constraints and an optional error message if not.",
      "dependencies": []
    },
    {
      "guid": "LIB_FILE_UPLOAD-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for upload progress state, providing a percentage (0-100) and a state indicator used to update the UI progress bar.",
      "dependencies": []
    },
    {
      "guid": "LIB_FILE_UPLOAD-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Validate a File object against allowed MIME types and maximum file size before attempting upload. Returns a ValidationResult indicating pass/fail with a user-friendly error message.",
      "dependencies": []
    },
    {
      "guid": "LIB_FILE_UPLOAD-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Upload a profile photo to Firebase Storage under profile-photos/{userId}/{timestamp}.{ext}, with real-time progress reporting via an optional callback. Validates the file first, then uses resumable upload for reliability.",
      "dependencies": []
    },
    {
      "guid": "LIB_FILE_UPLOAD-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Delete a profile photo from Firebase Storage by extracting the storage path from the download URL and calling deleteObject. Silently fails if the photo does not exist or the URL is external, as this is a best-effort cleanup.",
      "dependencies": []
    },
    {
      "guid": "LIB_FILE_UPLOAD-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Compress an image file client-side by resizing it to a maximum width (default 400px) while maintaining aspect ratio, and re-encoding as JPEG at a configurable quality level (default 0.8). Uses HTML5 Canvas for image manipulation.",
      "dependencies": []
    },
    {
      "guid": "LIB_FIREBASE_ADMIN-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Server-side Firebase Admin SDK initialisation and shared utilities for authentication verification, correlation ID generation, and centralised error logging.",
      "dependencies": []
    },
    {
      "guid": "LIB_FIREBASE_ADMIN-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Module-level singleton cache for the Firebase Admin SDK app, Firestore instance, FieldValue, and Timestamp to avoid re-initialisation on every request.",
      "dependencies": []
    },
    {
      "guid": "LIB_FIREBASE_ADMIN-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Lazily initialises the Firebase Admin SDK (choosing between explicit service account credentials for local dev or Application Default Credentials for Google Cloud) and returns the Firestore instance, FieldValue, and Timestamp utilities.",
      "dependencies": []
    },
    {
      "guid": "LIB_FIREBASE_ADMIN-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Verifies a Firebase ID token from an Authorization header and returns the decoded user identity (uid and email), or null if invalid/missing.",
      "dependencies": []
    },
    {
      "guid": "LIB_FIREBASE_ADMIN-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generates a unique correlation ID for error tracking, combining a base-36 timestamp with a random suffix to ensure uniqueness.",
      "dependencies": []
    },
    {
      "guid": "LIB_FIREBASE_ADMIN-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Persists error details (message, stack trace, context, correlation ID) to the error_logs Firestore collection for centralised error tracking and debugging.",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Client-side league management module providing CRUD operations for custom leagues. Handles league creation, joining via invite codes, leaving, member removal, renaming, invite code regeneration, and deletion. All operations interact with the leagues Firestore collection.",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generate a cryptographically random invite code of INVITE_CODE_LENGTH characters using an alphabet that excludes visually ambiguous characters (I, O, 0, 1) to reduce user input errors.",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Create a new custom league in Firestore with the requesting user as owner and sole initial member. Enforces the maximum leagues-per-user limit before creation.",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Join an existing league by looking up its invite code (case-insensitive), validating membership limits and duplicate membership, then adding the user's team ID to the league's memberUserIds array.",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Remove the requesting user from a league's memberUserIds array. Prevents leaving the global league and prevents the league owner from leaving (they must transfer ownership or delete instead).",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Query and return all leagues that contain the given userId (or teamId) in their memberUserIds array, using Firestore's array-contains query.",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetch a single league document by its Firestore document ID, returning null if not found.",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Generate a new invite code for an existing league, replacing the old one. Only the league owner is authorised to perform this action, invalidating any previously shared invite codes.",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Update the display name of a league. Only the league owner is authorised to rename. Trims whitespace from the new name before saving.",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Remove a specified member from a league's memberUserIds array. Only the league owner can remove members, and the owner cannot remove themselves.",
      "dependencies": []
    },
    {
      "guid": "LIB_LEAGUES-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Permanently delete a league document from Firestore. Only the league owner can delete, and the global league is protected from deletion.",
      "dependencies": []
    },
    {
      "guid": "LIB_PLACEHOLDER_IMAGES-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Provides typed access to driver placeholder image data loaded from a JSON file.",
      "dependencies": []
    },
    {
      "guid": "LIB_PLACEHOLDER_IMAGES-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Define the TypeScript shape for an image placeholder entry, ensuring type safety",
      "dependencies": []
    },
    {
      "guid": "LIB_PLACEHOLDER_IMAGES-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Export the full array of placeholder images from the JSON catalogue, typed as ImagePlaceholder[].",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Orchestration module for race score calculation, persistence, and standings",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Define the shape of a race result document containing the top 6 finishing",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Define the shape of a user prediction document containing the raceId,",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Normalise raceId strings to a consistent dash-separated format so that",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Core scoring engine: fetches all predictions for a given race from Firestore",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Define auxiliary TypeScript interfaces for the score-with-team-name",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "End-to-end orchestrator: calculates scores for a race, persists each",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Delete all score documents for a given race from the 'scores' collection.",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Format a RaceResult into a compact display string showing position numbers",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING_RULES-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Single source of truth for all Prix Six scoring constants, rule descriptions,",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING_RULES-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Define the concrete point values for the hybrid position-based scoring system.",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING_RULES-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Derive computed constants (max points per race, number of drivers) from",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING_RULES-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Calculate the points a single driver prediction earns based on the",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING_RULES-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Provide human-readable rule descriptions for display on the rules page.",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING_RULES-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Provide human-readable gameplay rule descriptions for the rules page,",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING_RULES-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Define the tiebreaker rule text for end-of-season standings disputes.",
      "dependencies": []
    },
    {
      "guid": "LIB_SCORING_RULES-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Export TypeScript types derived from the SCORING_RULES and GAMEPLAY_RULES",
      "dependencies": []
    },
    {
      "guid": "LIB_UTILS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Utility module providing CSS class name merging for Tailwind CSS.",
      "dependencies": []
    },
    {
      "guid": "LIB_UTILS-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Merge multiple CSS class values into a single string, resolving Tailwind CSS conflicts.",
      "dependencies": []
    },
    {
      "guid": "LIB_VERSION-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Single source of truth for the application version number displayed in the UI.",
      "dependencies": []
    },
    {
      "guid": "LIB_VERSION-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Export the current application version string for UI display and build verification.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "About page: public-facing informational page explaining Prix Six, F1 basics, scoring rules, and app features. Also manages the cinematic intro sequence for first-time visitors.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Type definition for user presence documents stored in Firestore 'presence' collection.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Session timeout threshold (15 minutes) for determining whether a user session is still considered active.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "localStorage key for tracking whether the user has already seen the cinematic intro animation.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main client component for the About page. Manages intro display state, fetches live user/team data from Firestore, and renders all informational sections (how to play, features, F1 primer, scoring, support).",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Check localStorage on mount to decide if cinematic intro should play. Prevents rendering the page content until the check is complete to avoid a visual flash.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Callback invoked when the cinematic intro finishes or is skipped. Persists the \"seen\" flag to localStorage so the intro does not replay on future visits.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Allows the user to replay the cinematic intro by clicking the \"Watch Intro\" button.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Memoised Firestore query for all user documents. Used to compute the total teams count.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Memoised Firestore query for all presence documents. Used to compute the online user count.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-010",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Computes total team count including secondary teams. Each user counts as 1 team, plus 1 more if they have a secondaryTeamName.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-011",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Computes the number of currently online users by checking presence documents for active sessions within the SESSION_TIMEOUT_MS window.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-012",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main JSX render of the About page: hero section with version badge and replay button, live stat cards, \"How to Play\" guide, scoring breakdown, features grid, F1 primer for newcomers, and support contact section.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ABOUT-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Default page export wrapping the client component. Required by Next.js App Router for the /about route.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ADMIN-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Admin panel page  tabbed interface providing access to all league management tools.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ADMIN-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Import LeaguesManager for the 16th admin tab.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ADMIN-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Import AttackMonitor component for security monitoring displayed above the tabs.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ADMIN-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main admin page component  enforces admin-only access, fetches all users,",
      "dependencies": []
    },
    {
      "guid": "PAGE_ADMIN-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised Firestore query for all users  only created when user is confirmed admin.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ADMIN-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Admin access guard  redirects non-admin users to /dashboard and logs an",
      "dependencies": []
    },
    {
      "guid": "PAGE_ADMIN-006",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Loading/access-denied guard render  shows \"Verifying access...\" while auth loads",
      "dependencies": []
    },
    {
      "guid": "PAGE_ADMIN-007",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Main admin panel render  AttackMonitor at top, then 16-tab interface covering",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Submission audit page  displays a paginated table of all prediction submissions",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Page size constant for paginated audit log queries.",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript interface for audit log entries  defines the shape of prediction_submitted events.",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main audit page component  manages paginated audit log fetching, user lookup,",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Real-time query for all users  provides team name lookup for audit log entries.",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Paginated fetch function for audit logs  queries prediction_submitted events",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Initial data load  triggers fetchAuditLogs once when Firestore is ready.",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Load more button handler  fetches the next page of audit logs.",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Formats a Firestore timestamp (or date string) to en-GB locale string.",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Wrapper around formatDriverPredictions to convert driver ID arrays to display names.",
      "dependencies": []
    },
    {
      "guid": "PAGE_AUDIT-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Joins audit log entries with user data to resolve team names. Falls back to",
      "dependencies": []
    },
    {
      "guid": "PAGE_DASHBOARD-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Server-rendered dashboard page. Displays next race info (qualifying/race dates),",
      "dependencies": []
    },
    {
      "guid": "PAGE_DASHBOARD-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Pre-season flag  controls visibility of the pre-season testing banner.",
      "dependencies": []
    },
    {
      "guid": "PAGE_DASHBOARD-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Force dynamic rendering to prevent Next.js from attempting Firestore access at build time.",
      "dependencies": []
    },
    {
      "guid": "PAGE_DASHBOARD-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main dashboard page component  computes next race dates, renders countdown client,",
      "dependencies": []
    },
    {
      "guid": "PAGE_DEV-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Developer info page  displays current build information (version, framework, backend, AI)",
      "dependencies": []
    },
    {
      "guid": "PAGE_DEV-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Next.js page metadata for SEO  sets title and description for the dev info page.",
      "dependencies": []
    },
    {
      "guid": "PAGE_DEV-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main dev page component  renders build info grid (version, framework, backend, AI),",
      "dependencies": []
    },
    {
      "guid": "PAGE_FORGOT_PIN-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Forgot PIN page  allows users to request a temporary PIN reset email.",
      "dependencies": []
    },
    {
      "guid": "PAGE_FORGOT_PIN-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Zod validation schema for forgot PIN form  requires a valid email address.",
      "dependencies": []
    },
    {
      "guid": "PAGE_FORGOT_PIN-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main forgot PIN page component  renders email input form, calls resetPin API,",
      "dependencies": []
    },
    {
      "guid": "PAGE_FORGOT_PIN-003",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Form submission handler  calls resetPin API, shows toast on success/failure,",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "League detail page  displays a single league's information including name, invite code,",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Defines the display shape for a league member, including secondary team detection.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main page component that renders league details with real-time updates, inline name editing,",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Determines if the current user is a member of this league, checking both primary and secondary team IDs.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Subscribes to real-time Firestore updates for the league document, and fetches member details",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Regenerates the league invite code (owner-only action) and displays the new code via toast.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Saves the edited league name (owner-only action) via Firestore update.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Removes a member from the league (owner-only action, cannot remove self).",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Removes the current user from the league (non-owners only) and navigates back to leagues list.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Permanently deletes the league (owner-only action) and navigates back to leagues list.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUE_DETAIL-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Copies the league invite code to the clipboard and confirms via toast.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUES-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Leagues listing page  displays all leagues the current user belongs to as cards,",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUES-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main page component that renders the league listing grid with create/join dialogs,",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUES-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Creates a new league via Firestore and navigates to the new league detail page on success.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUES-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Joins an existing league using a 6-character invite code, with support for primary or secondary team selection.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUES-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Removes the current user from a league they are a member of (non-owners only).",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUES-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Permanently deletes a league (owners only), removing all member associations.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUES-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Copies a league invite code to the clipboard and confirms via toast.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LEAGUES-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Sets the selected league in context and navigates to the league detail page.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LOGIN-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Login page for Prix Six. Authenticates users via email + 6-digit PIN,",
      "dependencies": []
    },
    {
      "guid": "PAGE_LOGIN-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Zod validation schema for login form  enforces valid email and exactly 6-digit PIN.",
      "dependencies": []
    },
    {
      "guid": "PAGE_LOGIN-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main login page component  renders email/PIN form, handles authentication,",
      "dependencies": []
    },
    {
      "guid": "PAGE_LOGIN-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Form submission handler  calls login API, manages submit/redirect states,",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Predictions page  allows users to view, submit, and edit their driver predictions",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Inner content component encapsulating all prediction logic  determines next open race,",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Real-time query for all race_results documents to determine which races are complete.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Computes the next open race by finding the first race in the schedule without",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Determines if the pit lane is open (predictions allowed) by checking both",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Constructs the Firestore prediction document ID from team ID and race ID.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Memoised Firestore document reference for the user's prediction for the current race/team.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Query to fetch recent predictions for the selected team, used for carry-over logic",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Logs errors from the allPredictions query (e.g., missing composite index, permissions).",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Finds the most recent previous prediction (not for the current race) to carry over",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-010",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Builds the initial 6-slot driver prediction array from either the current race",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-011",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Ensures selectedTeam is set once user data loads (handles initial mount race condition).",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Determines why the pit lane is closed  either race results entered or qualifying started.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PREDICTIONS-013",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Exported page wrapper that renders PredictionsContent.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Profile & Settings page  allows users to manage their account, notification preferences,",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Zod schema for email notification preferences form validation.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-002",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "TypeScript type inferred from profileFormSchema for type-safe form handling.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Zod schema for the secondary team name form  enforces minimum 3-character name.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-004",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Zod schema for PIN change form  enforces 6-digit length and match between new/confirm.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main Profile page component  renders all profile management cards and handles all",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Initialise notification preferences form with user's saved values or sensible defaults.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Reset form values when user data loads or changes (e.g. after Firestore round-trip).",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Initialise secondary team form with existing secondary team name if one exists.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Initialise change PIN form with empty defaults.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Sync secondary team name into form when user data loads.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Sync secondary email into local state when user data loads.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Save notification preferences to Firestore and log audit event.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Request a new temporary PIN to be emailed to the user.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-014",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Permanently close the user's account by deleting presence and user documents, then logging out.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-015",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Use AI to suggest a fun secondary team name based on the user's primary team name.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-016",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Create the user's secondary team via the auth context function.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-017",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Change the user's PIN and force re-login for security.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-018",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Send a verification email to the user's primary email address.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-019",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Refresh the email verification status from Firebase Auth.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-020",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Save or update the user's secondary email address.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-021",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Remove the user's secondary email by passing null to the update function.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-022",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Remove the user's secondary team by deleting the secondaryTeamName field from Firestore.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-023",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Send a verification email to the user's secondary email address.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-024",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Save a profile photo URL (from manual entry or preset selection) to Firestore.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-025",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Handle file upload for profile photo  validates, compresses, uploads to Firebase Storage,",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-026",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Preset avatar options generated from external avatar services using the user's ID/team name.",
      "dependencies": []
    },
    {
      "guid": "PAGE_PROFILE-027",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Derive the current avatar URL  user's saved photo or a fallback generated avatar.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Race Results page  displays per-race points breakdowns for all teams' predictions,",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Type for a score document associated with a team's race performance.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Type for the official race result document  stores the actual top-6 driver finish order.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Score type enum for colour-coded display  maps position difference to grade (A=exact, E=miss).",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Type for a single driver within a team's prediction  includes predicted/actual positions,",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Type for a team's complete result for a race  predictions, total points, bonus, and rank.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Page size constant for Firestore query pagination of prediction documents.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Race rank badge component for 1st, 2nd, 3rd place finishers in a single race event.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-008",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Build a flat list of all race events (GP + Sprint) from the RaceSchedule, with IDs and",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-009",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Module-level constant of all race events  avoids recomputation on every render.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-010",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Suspense loading fallback  skeleton UI shown while ResultsContent loads (required by",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main results content component  fetches race results, scores, and predictions from",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetch all race_results documents on mount to determine which races have admin-entered",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Filter the full race events list to only those with admin-entered results.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-014",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Calculate the default race ID to display  prioritises URL parameter, then most recent",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-015",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Sync selectedRaceId when the most recent result is fetched (only if no URL param).",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-016",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Sync selectedRaceId when the URL ?race= parameter changes (e.g. browser navigation).",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-017",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Convert a full event ID (with -GP or -Sprint suffix) to the base race ID in title case,",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-018",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetch the official race result document when the selected race changes.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-019",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Format a Firestore timestamp into a human-readable UK date-time string.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-020",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Build a formatted string of the official top-6 result (e.g. \"P1: Verstappen | P2: ...\").",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-021",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Map a predicted vs actual position difference to a score type grade (A-E) for colour coding.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-022",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Parse a team's raw predictions (object or array format) and compare against actual",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-023",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Calculate bonus points  awards 10 points if all 6 predicted drivers are in the top 6.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-024",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Map score type grades (A-E) to Tailwind CSS colour classes for visual feedback.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-025",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetch all data for the selected race in parallel  count, scores, and first page of",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-026",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Load the next page of prediction documents from Firestore using cursor-based pagination.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-027",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Filter teams by the selected league's member user IDs (or show all if global).",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-028",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Calculate effective points for a team  uses stored score if available, otherwise",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-029",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Sort teams by points (descending) or team name (ascending), and assign race ranks",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-030",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Toggle the sort order between points and team name.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RESULTS-031",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Exported page component  wraps ResultsContent in a Suspense boundary as required by",
      "dependencies": []
    },
    {
      "guid": "PAGE_ROOT-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Root page component  renders the login page as the application entry point.",
      "dependencies": []
    },
    {
      "guid": "PAGE_ROOT-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Default export that renders LoginPage as the home page content.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RULES-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Rules page  displays the league gameplay rules, scoring system, and tie-breaker rule",
      "dependencies": []
    },
    {
      "guid": "PAGE_RULES-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Maps gameplay rule titles to Lucide icon components for visual differentiation in the rules list.",
      "dependencies": []
    },
    {
      "guid": "PAGE_RULES-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main page component that renders three cards: Gameplay Rules, Scoring System, and Tie-Breaker,",
      "dependencies": []
    },
    {
      "guid": "PAGE_SCHEDULE-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Schedule page  displays the full 2026 F1 race calendar with qualifying, sprint, and GP times.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SCHEDULE-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Converts an ISO 8601 date string into a localised date and time pair for display.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SCHEDULE-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main page component that renders the full race schedule with next-race highlighting,",
      "dependencies": []
    },
    {
      "guid": "PAGE_SIGNUP-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Signup page for Prix Six. Allows new players to register with a team name,",
      "dependencies": []
    },
    {
      "guid": "PAGE_SIGNUP-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Array of humorous F1-themed team name suggestions shown via the Wand2 button.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SIGNUP-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Blocklist of common weak PINs to prevent trivially guessable credentials.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SIGNUP-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Zod schema for signup form  validates team name (min 3 chars), email,",
      "dependencies": []
    },
    {
      "guid": "PAGE_SIGNUP-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main signup page component  renders registration form with team name suggestion,",
      "dependencies": []
    },
    {
      "guid": "PAGE_SIGNUP-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Client-only effect to set a random team name suggestion after hydration,",
      "dependencies": []
    },
    {
      "guid": "PAGE_SIGNUP-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Picks a random F1-themed team name from funnyNames and sets it in the form.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SIGNUP-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Form submission handler  calls signup API, shows success toast and redirects",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Season Standings page  displays cumulative league standings after each race weekend,",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Visual indicator for rank changes between race weekends  shows arrows/chevrons based",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Badge for top-3 ranked teams  gold for 1st, silver for 2nd, bronze for 3rd.",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-003",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Small \"Winner\" badge shown next to the team(s) that scored highest in the selected race's",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-004",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Constant identifying the 2025 season defending champion team for special badge display.",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Purple badge identifying the defending 2025 season champion in the standings table.",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Type for raw score documents fetched from Firestore scores collection.",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Type for a single row in the computed standings table.",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Type for a completed race weekend  tracks base, sprint, and GP race IDs along with",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Page size constant for client-side pagination of standings rows.",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-010",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Main Standings page component  subscribes to scores in real-time, computes cumulative",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Real-time subscription to the entire scores collection  processes raw score documents,",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Filter raw scores by the selected league's member user IDs (or pass all if global).",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-013",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Calculate cumulative standings for the selected race weekend  computes old/new overall",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-014",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Determine the race winners (highest GP and Sprint points) for the selected race weekend,",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-015",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Build chart data for season progression  cumulative points per team after each race",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-016",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Derive the current user's primary and secondary userIds for chart line filtering.",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-017",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Filter chart lines to approximately 11 teams based on chartMode (top10 or myPosition).",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-018",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Generate a deterministic HSL colour for each team name  ensures the same team always",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-019",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Calculate maximum points for the chart Y-axis with a 10% buffer for visual headroom.",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-020",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Client-side pagination  tracks how many standings rows to display and whether more exist.",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-021",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Load the next page of standings rows with a small delay for smooth UX.",
      "dependencies": []
    },
    {
      "guid": "PAGE_STANDINGS-022",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Navigate to the Results page for a specific race, optionally filtering by team.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Submissions page  displays locked-in predictions for all teams for a selected race in a sortable,",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-001",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Defines the display shape for a single submission row in the table.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Union type for the two sortable columns: submission date or team name.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main page component that orchestrates the submissions table with race selection, sorting,",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Determines the first unscored race by comparing all scores in Firestore against the RaceSchedule,",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-005",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Formats a Firestore timestamp or Date into a human-readable en-GB date/time string.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-006",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Delegates to the centralised formatDriverPredictions utility for consistent driver name formatting.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-007",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches the total prediction count for the selected race using Firestore server-side aggregation.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches paginated submission data from the \"predictions\" collectionGroup filtered by raceId,",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-009",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Triggers fetchSubmissions on initial page load and whenever the race or sort field changes.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Delegates to fetchSubmissions with isLoadMore=true for paginated loading.",
      "dependencies": []
    },
    {
      "guid": "PAGE_SUBMISSIONS-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Filters the full submissions list to only members of the selected league (or shows all if global).",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Teams page  displays all team predictions for a selected race in an expandable accordion.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Represents a basic team record with user association, used before predictions are loaded.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-002",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Extends TeamBasic with prediction data and loading state for on-demand prediction fetching.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-003",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Determines the most recent race that has scored results, used to set the default race selection.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-004",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Main page component that orchestrates team listing, race selection, on-demand prediction loading,",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-005",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches race_results on mount to determine which race to show by default (most recent with results).",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-006",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches the total user count using Firestore server-side aggregation (no document downloads).",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-007",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Converts raw Firestore prediction data into an array of F1Driver objects for display.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-008",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches paginated team list from Firestore users collection WITHOUT predictions (fast initial load).",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-009",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Checks whether a team's createdAt timestamp is after the selected race's qualifying time.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Fetches predictions for a single team on-demand when the user expands an accordion item.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-011",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Handles accordion open/close events and triggers on-demand prediction fetching for the opened team.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-012",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Triggers the initial team list fetch once the default race has been determined.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-013",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Resets all team prediction data and closes the accordion when the selected race changes.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-014",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Delegates to fetchTeams with isLoadMore=true for paginated loading.",
      "dependencies": []
    },
    {
      "guid": "PAGE_TEAMS-015",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Filters the full teams list to only members of the selected league (or shows all if global).",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_EMAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Email verification landing page. Processes the token+uid from a verification link,",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_EMAIL-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Union type representing all possible verification states for UI rendering.",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_EMAIL-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Inner content component that reads search params (token, uid), calls the",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_EMAIL-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Effect that fires on mount to validate token/uid params and call the verify API.",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_EMAIL-004",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Loading fallback component shown while useSearchParams() resolves inside Suspense.",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_EMAIL-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Exported page component wrapping VerifyEmailContent in Suspense boundary",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_SECONDARY_EMAIL-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Secondary email verification landing page. Processes the token+uid from a",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_SECONDARY_EMAIL-001",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Union type representing all possible verification states for UI rendering.",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_SECONDARY_EMAIL-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Inner content component that reads search params (token, uid), calls the",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_SECONDARY_EMAIL-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Effect that fires on mount to validate token/uid params and call the verify API.",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_SECONDARY_EMAIL-004",
      "version": 3,
      "logic_category": "RECOVERY",
      "description": "Loading fallback component shown while useSearchParams() resolves inside Suspense.",
      "dependencies": []
    },
    {
      "guid": "PAGE_VERIFY_SECONDARY_EMAIL-005",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Exported page component wrapping VerifySecondaryEmailContent in Suspense boundary",
      "dependencies": []
    },
    {
      "guid": "PROVISION_RECOVERY-000",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Root module for provision_recovery_env.sh. One-time infrastructure setup script that creates all GCP resources required by the backup system: bucket, recovery project, PITR, and IAM roles.",
      "dependencies": [
        "PROVISION_RECOVERY-001",
        "PROVISION_RECOVERY-010",
        "PROVISION_RECOVERY-020",
        "PROVISION_RECOVERY-030",
        "PROVISION_RECOVERY-040",
        "PROVISION_RECOVERY-050",
        "PROVISION_RECOVERY-060"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-001",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Configuration constants: project IDs, bucket name, region, retention days. Single point of change for all infrastructure parameters.",
      "dependencies": []
    },
    {
      "guid": "PROVISION_RECOVERY-002",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Shell helper functions: log/warn/fail for severity-prefixed output, confirm() for gating irreversible operations behind y/N prompts.",
      "dependencies": []
    },
    {
      "guid": "PROVISION_RECOVERY-003",
      "version": 3,
      "logic_category": "VALIDATION",
      "description": "Pre-flight checks: verifies gcloud and gsutil CLIs exist, prints configuration summary, and requires explicit confirmation before proceeding.",
      "dependencies": [
        "PROVISION_RECOVERY-002"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-010",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Step 1: Creates gs://prix6-backups bucket with Uniform Bucket-Level Access and 7-day Object Retention Lock. Lock is applied in two stages (set policy, then lock). IRREVERSIBLE  second confirm() gate.",
      "dependencies": [
        "PROVISION_RECOVERY-002"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-020",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Step 2: Creates prix6-recovery-test GCP project. Idempotent  skips if project already exists. Recovery project is ephemeral target for Sunday smoke test imports.",
      "dependencies": [
        "PROVISION_RECOVERY-002"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-021",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Links billing to recovery project using first open billing account found. Firestore requires billing. Fails with manual instructions if no billing account is available.",
      "dependencies": [
        "PROVISION_RECOVERY-020"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-030",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Step 3: Enables required GCP APIs on both projects. Main project: Firestore, Cloud Functions, Cloud Run, Cloud Build, Cloud Scheduler. Recovery project: Firestore, Firebase.",
      "dependencies": [
        "PROVISION_RECOVERY-020",
        "PROVISION_RECOVERY-021"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-040",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Step 4: Creates Firestore database in recovery project (same region as main for import compatibility). Target for runRecoveryTest import and verification.",
      "dependencies": [
        "PROVISION_RECOVERY-030"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-050",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Step 5: Enables Point-in-Time Recovery on main project's Firestore. Complementary safeguard alongside daily GCS exports  allows restore to any point within PITR window without import.",
      "dependencies": [
        "PROVISION_RECOVERY-040"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-060",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Step 6 overview: grants all IAM permissions required by Cloud Functions for export, storage, import, and smoke test operations.",
      "dependencies": [
        "PROVISION_RECOVERY-061",
        "PROVISION_RECOVERY-062",
        "PROVISION_RECOVERY-063",
        "PROVISION_RECOVERY-064",
        "PROVISION_RECOVERY-065",
        "PROVISION_RECOVERY-066"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-061",
      "version": 3,
      "logic_category": "TRANSFORMATION",
      "description": "Derives Firestore service agent SA email from project number. This is the internal GCP agent that writes managed export files  separate from the firebase-adminsdk or Cloud Functions SA.",
      "dependencies": []
    },
    {
      "guid": "PROVISION_RECOVERY-062",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Grants datastore.importExportAdmin to Cloud Functions SA on main project. Required by BACKUP_FUNCTIONS-011 to call exportDocuments().",
      "dependencies": [
        "BACKUP_FUNCTIONS-011"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-063",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Grants storage.admin on backup bucket to Cloud Functions SA. Required by BACKUP_FUNCTIONS-012 to write Auth JSON export.",
      "dependencies": [
        "BACKUP_FUNCTIONS-012"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-064",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Grants storage.objectAdmin on backup bucket to Firestore service agent. Critical and easy to forget  without this, exportDocuments() API call returns success but the LRO fails with permission denied.",
      "dependencies": [
        "BACKUP_FUNCTIONS-011"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-065",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Grants datastore.importExportAdmin on recovery project to Cloud Functions SA. Required by BACKUP_FUNCTIONS-022 to import backups for smoke test.",
      "dependencies": [
        "BACKUP_FUNCTIONS-022"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-066",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Grants datastore.user on recovery project to Cloud Functions SA. Required by BACKUP_FUNCTIONS-023 to read documents during smoke test verification.",
      "dependencies": [
        "BACKUP_FUNCTIONS-023"
      ]
    },
    {
      "guid": "PROVISION_RECOVERY-070",
      "version": 3,
      "logic_category": "ORCHESTRATION",
      "description": "Completion summary: prints what was provisioned and next steps (install functions deps, deploy, verify).",
      "dependencies": []
    },
    {
      "guid": "PUBCHAT_ADMIN_TAB-001",
      "version": 1,
      "logic_category": "ORCHESTRATION",
      "description": "Import PubChatPanel component for the 15th admin tab.",
      "dependencies": []
    },
    {
      "guid": "PUBCHAT_PANEL-000",
      "version": 2,
      "logic_category": "ORCHESTRATION",
      "description": "Admin panel for the PubChat tab. Renders the ThePaddockPubChat",
      "dependencies": []
    },
    {
      "guid": "PUBCHAT_PANEL-001",
      "version": 2,
      "logic_category": "ORCHESTRATION",
      "description": "PubChatPanel component  centres the pub chat animation and shows",
      "dependencies": []
    }
  ]
}
